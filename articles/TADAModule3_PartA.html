<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>TADA Module 3A: Associating WQP Characteristic Names with Applicable ATTAINS State, Tribal or EPA 304(a) Parameter and Use Names • EPATADA</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="TADA Module 3A: Associating WQP Characteristic Names with Applicable ATTAINS State, Tribal or EPA 304(a) Parameter and Use Names">
<meta name="description" content="The first of multiple Module 3 vignettes (under development) showcasing water quality data analysis functions and example workflows.">
<meta property="og:description" content="The first of multiple Module 3 vignettes (under development) showcasing water quality data analysis functions and example workflows.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EPATADA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/CONTRIBUTING.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../articles/TADAAssessmentUnitUseCase.html">TADA: Assessment Unit Use Case Demo</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_AdvancedTraining.html">TADA Module 1: Training for Intermediate/Advanced R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_BeginnerTraining.html">TADA Module 1: Training for Beginner R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1.html">TADA Module 1: Water Quality Portal Data Discovery and Cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule2.html">TADA Module 2: Geospatial Functions</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule3_PartA.html">TADA Module 3A: Associating WQP Characteristic Names with Applicable ATTAINS State, Tribal or EPA 304(a) Parameter and Use Names</a></li>
    <li><a class="dropdown-item" href="../articles/TADAWaterSciConWorkshopDemo.html">TADA: WaterSciCon Workshop Demo</a></li>
    <li><a class="dropdown-item" href="../articles/WQXValidationService.html">WQX QAQC Service User Guide</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USEPA/EPATADA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>TADA Module 3A: Associating WQP Characteristic Names with Applicable ATTAINS State, Tribal or EPA 304(a) Parameter and Use Names</h1>
                        <h4 data-toc-skip class="author">TADA Team</h4>
            
            <h4 data-toc-skip class="date">2025-03-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EPATADA/blob/develop/vignettes/TADAModule3_PartA.Rmd" class="external-link"><code>vignettes/TADAModule3_PartA.Rmd</code></a></small>
      <div class="d-none name"><code>TADAModule3_PartA.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="welcome">Welcome!<a class="anchor" aria-label="anchor" href="#welcome"></a>
</h2>
<p>Thank you for your interest in Tools for Automated Data Analysis
(TADA). TADA is an open-source tool set built in the R programming
language. The EPATADA R Package is still under development. New
functionality is added weekly, and sometimes we need to make bug fixes
in response to user feedback. We appreciate your feedback, patience, and
interest in these helpful tools. If you are interested in contributing
to EPATADA development, more information is available <a href="https://usepa.github.io/EPATADA/articles/CONTRIBUTING.html">here</a>.
We welcome collaboration with external partners!</p>
</div>
<div class="section level2">
<h2 id="install-and-load-packages">Install and load packages<a class="anchor" aria-label="anchor" href="#install-and-load-packages"></a>
</h2>
<p>First, install and load the remotes package specifying the repo. This
is needed before installing EPATADA because it is only available on
GitHub.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span>,</span>
<span>  repos <span class="op">=</span> <span class="st">"http://cran.us.r-project.org"</span></span>
<span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span></span></code></pre></div>
<p>Next, install and load the EPATADA R Package using the remotes
package. Dependency packages will also be downloaded automatically from
CRAN. You may be prompted in the console to update dependencies that
have more recent versions available. If you see this prompt, it is
recommended to update all of them (enter 1 into the console).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"USEPA/EPATADA"</span>,</span>
<span>  ref <span class="op">=</span> <span class="st">"develop"</span>,</span>
<span>  dependencies <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Finally, use the <strong>library()</strong> function to load the
EPATADA R Package into your R session.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usepa.github.io/EPATADA/">EPATADA</a></span><span class="op">)</span></span></code></pre></div>
<p>All TADA R package functions have their own individual help pages,
listed on the <a href="https://usepa.github.io/EPATADA/reference/index.html">Function
reference</a> page on the GitHub site. Users can also access the help
page for a given function in R or RStudio using the following format
(example below): <code>?[name of TADA function]</code></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Access help page for TADA_DataRetrieval</span></span>
<span><span class="op">?</span><span class="va">TADA_DataRetrieval</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="introduction-to-tada-module-3">Introduction to TADA Module 3<a class="anchor" aria-label="anchor" href="#introduction-to-tada-module-3"></a>
</h2>
<p>This <a href="https://bookdown.org/yihui/rmarkdown/" class="external-link">RMarkdown</a>
document walks users through how to create WQP and ATTAINS data
crosswalks that are needed prior to defining and capturing organization
specific criteria and methodologies. It is the first of several
vignettes that are being developed as part of TADA Module 3.</p>
<p>Specifically, this vignette provides an overview of two functions
that can assist users with:</p>
<ul>
<li><p>Creating a crosswalk (reference table) between ATTAINS parameter
names and WQP/TADA characteristic names.</p></li>
<li><p>Creating a crosswalk (reference table) of all unique combinations
of ATTAINS uses and and parameters applicable to ATTAINS Assessment
Units of interest.</p></li>
</ul>
<p>These Module 3 functions are being designed with the flexibility for
users from states, tribes, or territories to input organization-specific
information. While TADA functions help generate these crosswalks, users
must review and modify the tables generated in each step of the process
to ensure their accuracy. Additionally, the TADA team has also
incorporated national recommended Clean Water Act (CWA) 304(a) numeric
criteria for optional use in Module 3 functions by leveraging data from
EPA’s <a href="https://www.epa.gov/wqs-tech/state-specific-water-quality-standards-effective-under-clean-water-act-cwa" class="external-link">Criteria
Search Tool (CST)</a>. In the next vignette, TADAModule3_PartB , which
is coming soon, this will allow users to analyze their data against the
304(a) criteria; and to easily compare results when when using 304(a)
criteria vs. their own organization’s criteria.</p>
</div>
<div class="section level2">
<h2 id="example-data-from-wqp">Example data from WQP<a class="anchor" aria-label="anchor" href="#example-data-from-wqp"></a>
</h2>
<p>Let’s start with an example data frame that has gone through data
cleaning, wrangling, harmonization, handling of censored data, removal
of suspect results, and other important TADA Module 1 functions. This
process should be completed by users before utilizing Module 3
functions. The example TADA data frame used in this vignette
(Data_HUC8_02070004_Mod1Output) has already been through this
process.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># import example data set (output of Module 1 Workflow)</span></span>
<span><span class="va">Data_NCTC</span> <span class="op">&lt;-</span> <span class="va">Data_HUC8_02070004_Mod1Output</span></span></code></pre></div>
<p>This example includes results from from multiple states. In the
following sections, for demonstration purposes, we will focus only on
Maryland. The remainder of this vignette will walk through how to fill
out two crosswalk tables (TADA_CreateParamRef and
TADA_CreateUseParamRef) that are needed before we can start assigning
applicable criteria and methodologies information for this specific
ATTAINS organization (Maryland).</p>
</div>
<div class="section level2">
<h2 id="tada_createparamref-basics">TADA_CreateParamRef() Basics<a class="anchor" aria-label="anchor" href="#tada_createparamref-basics"></a>
</h2>
<p>A crosswalk between WQX/WQP/TADA characteristics and ATTAINS
parameters is needed before we can integrate information from these two
data systems. Before creating the WQP/TADA and ATTAINS parameter
crosswalk table (TADA_CreateParamRef), let’s review the unique
characteristic, fraction and speciation combinations from the example
data frame (TADA.ComparableDataIdentifier) and how many results are
available for each within the example data set (Data_NCTC).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create table with counts of TADA.ComparableDataIdentifiers</span></span>
<span><span class="fu"><a href="../reference/TADA_FieldValuesTable.html">TADA_FieldValuesTable</a></span><span class="op">(</span><span class="va">Data_NCTC</span>, field <span class="op">=</span> <span class="st">"TADA.ComparableDataIdentifier"</span><span class="op">)</span></span></code></pre></div>
<p>We can also review the domain values of parameter names listed as
causes in prior assessment cycles (for all organizations) in ATTAINS by
using a function from rATTAINS, which provides functions for downloading
tidy data from the ATTAINS public web services (<a href="https://github.com/mps9506/rATTAINS" class="external-link uri">https://github.com/mps9506/rATTAINS</a>).</p>
<p>As the ATTAINS Parameter Names are more general than the TADA
Comparable Data Identifiers, it is not possible at this time to automate
the crosswalk. TADA_CreateParamRef() creates a template which includes
all TADA.ComparableDataIdentifiers from the TADA data frame and provides
a blank column, “ATTAINS.ParameterName” for users to input the
corresponding ATTAINS parameter name. The function automatically pairs
the EPA 304(a) pollutant name with the TADA.ComparableDataIdentifier for
some priority characteristics.</p>
<p>Setting “excel = TRUE” in TADA_CreateParamRef causes the function to
automatically create an Excel spreadsheet of the reference table for
easy review and editing. If users do not want to work in Excel, they can
use “excel = FALSE” to return a data frame. The data frame can be edited
directly in R if desired, although there are no TADA-specific functions
designed to facilitate this.</p>
<p>When using TADA_CreateParamRef(), users should specify the
organization(s) of interested in the “org_names” argument. This ensures
that the correct number of rows will be created in the reference table.
When “excel = TRUE”, specifying the organization(s) also creates a
separate tab in the Excel file which contains the parameter names used
in prior assessment cycles by the specified ATTAINS organization(s).
This will allow users to decide whether to continue to use the same
ATTAINS parameter names from prior assessments that their
organizations(s) have used in the past, or to use other valid parameter
names from the entire ATTAINS domain list. If there is not a suitable
ATTAINS parameter name to match a TADA.ComparableDataIdentifier, users
should contact the ATTAINS team (attains@epa.gov) for assistance.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create TADA parameter reference table for specified organization</span></span>
<span><span class="va">NCTC_ParamRef</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/TADA_CreateParamRef.html">TADA_CreateParamRef</a></span><span class="op">(</span></span>
<span>  <span class="va">Data_NCTC</span>,</span>
<span>  org_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MDE_EASP"</span><span class="op">)</span>, <span class="co"># Maryland</span></span>
<span>  excel <span class="op">=</span> <span class="cn">FALSE</span> </span>
<span>  <span class="co"># uncomment excel = TRUE, overwrite = TRUE to run the excel file</span></span>
<span>  <span class="co"># excel = TRUE, overwrite = TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># export TADA parameter reference table as csv</span></span>
<span><span class="fu"><a href="../reference/TADA_TableExport.html">TADA_TableExport</a></span><span class="op">(</span><span class="va">NCTC_ParamRef</span><span class="op">)</span></span></code></pre></div>
<p>Once the parameter reference table has been reviewed and modified, it
can be saved and reused for analysis of future TADA data frames.</p>
<p>The code chunk below demonstrates how the parameter reference table
can be modified in R. Once modifications are complete, we can re-run
TADA_CreateParamRef using the modified parameter reference table as the
input for “paramRef”. This will update the ATTAINS.FlagParameterName
column in the parameter reference table (see NCTC_ParamRef2 in example
below). This column provides information about whether or not the
organization specified in the “organization_identifier” column has
listed this parameter as a cause in prior assessment cycles. It also
flags rows where the TADA.ComparableDataIdentifier as not been assigned
an ATTAINS parameter name.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># only run the code chunks below if you make edits to the excel file.</span></span>
<span></span>
<span><span class="co"># downloads_path &lt;- file.path(Sys.getenv("USERPROFILE"), "Downloads", "myfileRef.xlsx")</span></span>
<span><span class="co"># ParamRef &lt;- openxlsx::read.xlsx(downloads_path, sheet = "CreateParamRef")</span></span>
<span></span>
<span><span class="co"># NCTC_ParamRef2 &lt;- TADA_CreateParamRef(</span></span>
<span><span class="co">#   Data_NCTC,</span></span>
<span><span class="co">#   org_names = c("MDE_EASP"),</span></span>
<span><span class="co">#   paramRef = ParamRef,</span></span>
<span><span class="co">#   excel = FALSE</span></span>
<span><span class="co">#   # uncomment excel = TRUE, overwrite = TRUE to run the excel file</span></span>
<span><span class="co">#   # excel = TRUE, overwrite = TRUE</span></span>
<span><span class="co">#   )</span></span>
<span></span>
<span><span class="va">ParamRef</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">NCTC_ParamRef</span>, ATTAINS.ParameterName <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"PH"</span>, <span class="va">TADA.ComparableDataIdentifier</span><span class="op">)</span> <span class="op">~</span> <span class="st">"PH"</span>,</span>
<span>  <span class="va">TADA.ComparableDataIdentifier</span> <span class="op">==</span> <span class="st">"ZINC_TOTAL_NA_UG/L"</span> <span class="op">~</span> <span class="st">"ZINC"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"NITRATE"</span>, <span class="va">TADA.ComparableDataIdentifier</span><span class="op">)</span> <span class="op">~</span> <span class="st">"NITROGEN, TOTAL"</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">NCTC_ParamRef_Final</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/TADA_CreateParamRef.html">TADA_CreateParamRef</a></span><span class="op">(</span></span>
<span>  <span class="va">Data_NCTC</span>,</span>
<span>  org_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MDE_EASP"</span><span class="op">)</span>,</span>
<span>  paramRef <span class="op">=</span> <span class="va">ParamRef</span>,</span>
<span>  excel <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="co"># uncomment excel = TRUE, overwrite = TRUE to run the excel file</span></span>
<span>  <span class="co">#excel = TRUE, overwrite = TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/TADA_TableExport.html">TADA_TableExport</a></span><span class="op">(</span><span class="va">NCTC_ParamRef_Final</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="tada_createuseparamref-basics">TADA_CreateUseParamRef() Basics<a class="anchor" aria-label="anchor" href="#tada_createuseparamref-basics"></a>
</h2>
<p>Our first example will pull in all prior ATTAINS uses (use_names) and
parameter names (ATTAINS.ParameterName) specific to the specified
ATTAINS organization (defined by the org_names function argument for
TADA_CreateUseParamRef), which in this case is “MDE_EASP” (Maryland).
Users will review the output and choose which use_name’s are applicable
to their analysis. The default functionality is to “Include” all ATTAINS
use_names (see the “IncludeOrExclude” column). Later in the data
analysis process, users will be asked to define criteria and
methodologies that is applicable to each ATTAINS use_name and parameter
name labeled as “Include”. If a use_name is not applicable, users should
choose “Exclude” for that ATTAINS parameter name and use name.</p>
<p>For any ATTAINS parameter name(s) that have not been used by this
organization in prior assessment cycles, there will be no prior use
names associated with them. In this case, users will be responsible for
manually assigning the appropriate use_name applicable to their org
under the column ‘use_name’, and for inputting additional rows as needed
if the parameter applies to multiples uses.</p>
<p>In the example below, we can see “PH” was not a prior ATTAINS
parameter name for MDE_EASP (see ATTAINS.FlagUseName column in
NCTC_ParamUseRef). If desired, a user can manually assign this parameter
to any applicable uses (disclaimer: this is for demonstration purposes
only and does not reflect MDE_EASP’s process).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">NCTC_ParamUseRef</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/TADA_CreateUseParamRef.html">TADA_CreateUseParamRef</a></span><span class="op">(</span></span>
<span>  <span class="va">Data_NCTC</span>,</span>
<span>  org_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MDE_EASP"</span><span class="op">)</span>,</span>
<span>  paramRef <span class="op">=</span> <span class="va">NCTC_ParamRef_Final</span>,</span>
<span>  excel <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="co"># uncomment excel = TRUE, overwrite = TRUE to run the excel file</span></span>
<span>  <span class="co"># excel = TRUE, overwrite = TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/TADA_TableExport.html">TADA_TableExport</a></span><span class="op">(</span><span class="va">NCTC_ParamUseRef</span><span class="op">)</span></span></code></pre></div>
<p>Users may also choose to include the EPA304a recommended water
quality criteria within the function input “org_names”. This option
utilizes the EPA304a.PollutantName column created in
TADA_CreateParamRef(). If a user includes additional organizations
beyond “MDE_EASP” and “EPA304a”, like in the example NCTC_ParamUseRef2
below, it will not generate rows for the parameter and use combinations
for those additional orgs (“21VASWCB” (Virginia), “21PA”(Pennsylvania),
WVDEP (West Virginia)) because only MDE_EASP (Maryland) was defined in
TADA_CreateParamRef() for paramRef = ParamRef. If you would like to
include other organizations here, you must first fill out the
TADA_CreateParamRef() for all organizations of interest.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">NCTC_ParamUseRef2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/TADA_CreateUseParamRef.html">TADA_CreateUseParamRef</a></span><span class="op">(</span></span>
<span>  <span class="va">Data_NCTC</span>,</span>
<span>  org_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EPA304a"</span>, <span class="st">"MDE_EASP"</span>, <span class="st">"21VASWCB"</span>, <span class="st">"21PA"</span>, <span class="st">"WVDEP"</span><span class="op">)</span>,</span>
<span>  paramRef <span class="op">=</span> <span class="va">NCTC_ParamRef_Final</span>,</span>
<span>  excel <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="co"># uncomment excel = TRUE, overwrite = TRUE to run the excel file</span></span>
<span>  <span class="co"># excel = TRUE, overwrite = TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/TADA_TableExport.html">TADA_TableExport</a></span><span class="op">(</span><span class="va">NCTC_ParamUseRef2</span><span class="op">)</span></span></code></pre></div>
<p>Instead, users should create a parameter and use reference table,
TADA_CreateUseParamRef(), for the same organizations included in the
parameter name crosswalk, TADA_CreateParamRef(). While aspects of this
process are partially automated, both crosswalks must be manually
reviewed, adjusted, and finalized by the user of these functions.</p>
<p>Users may choose to voluntarily share their reference tables for
their organization with the TADA Team so that others can use it in the
future.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">NCTC_ParamUseRef3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/TADA_CreateUseParamRef.html">TADA_CreateUseParamRef</a></span><span class="op">(</span></span>
<span>  <span class="va">Data_NCTC</span>,</span>
<span>  org_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EPA304a"</span>, <span class="st">"MDE_EASP"</span><span class="op">)</span>,</span>
<span>  paramRef <span class="op">=</span> <span class="va">NCTC_ParamRef_Final</span>,</span>
<span>  excel <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/TADA_TableExport.html">TADA_TableExport</a></span><span class="op">(</span><span class="va">NCTC_ParamUseRef3</span><span class="op">)</span></span></code></pre></div>
<p>In this example, we designate that the ATTAINS.ParameterName “PH” is
equivalent to the TADA.ComparableDataIdentifier ‘PH_NA_NA_STD UNITS’,
which was not used in prior ATTAINS assessment cycles for
<strong>Maryland</strong>. This results in the ‘use_name’ column
returning a blank value for ATTAINS.ParameterName “PH”. Therefore, we
need to specify the use_name(s) that we would like to associate with
“PH” for this organization. In excel, there will be a drop down list of
organization (“MDE_EASP”) specific use_names that were used in prior
ATTAINS assessments. If no excel file is generated, this is an example
workflow of how a user can edit the table in the R environment.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">add_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  <span class="st">"organization_identifier"</span> <span class="op">=</span> <span class="st">"MDE_EASP"</span>, </span>
<span>  <span class="st">"ATTAINS.ParameterName"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"PH"</span>, <span class="fl">3</span><span class="op">)</span>, </span>
<span>  <span class="st">"use_name"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Aquatic Life and Wildlife"</span>, <span class="st">"Water Contact Sports"</span>,</span>
<span>    <span class="st">"Seasonal Migratory Fish Spawning and Nursery Subcategory"</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The output of this will not reflect changes to the ATTAINS.FlagUseName column. To do so, we need to re run TADA_CreateUseParamRef() with paramUseRef = ParamUseRef as an argument.</span></span>
<span><span class="va">ParamUseRef</span> <span class="op">&lt;-</span> <span class="va">NCTC_ParamUseRef3</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">add_data</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"organization_identifier"</span>, <span class="st">"ATTAINS.ParameterName"</span><span class="op">)</span>, keep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>use_name <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/coalesce.html" class="external-link">coalesce</a></span><span class="op">(</span><span class="va">use_name.x</span>, <span class="va">use_name.y</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">use_name.x</span>, <span class="va">use_name.y</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># User now has a saved dataframe which can be used to reflect any updates of Parameter-use ref in the future.</span></span>
<span><span class="fu"><a href="../reference/TADA_TableExport.html">TADA_TableExport</a></span><span class="op">(</span><span class="va">ParamUseRef</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># PH will now reflect the changes</span></span>
<span><span class="va">NCTC_ParamUseRef_Final</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/TADA_CreateUseParamRef.html">TADA_CreateUseParamRef</a></span><span class="op">(</span></span>
<span>  <span class="va">Data_NCTC</span>,</span>
<span>  paramUseRef <span class="op">=</span> <span class="va">ParamUseRef</span>, <span class="co"># Edits were made to paramUseRef, updates flag column</span></span>
<span>  org_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EPA304a"</span>, <span class="st">"MDE_EASP"</span><span class="op">)</span>,</span>
<span>  paramRef <span class="op">=</span> <span class="va">NCTC_ParamRef_Final</span>,</span>
<span>  excel <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="co"># uncomment excel = TRUE, overwrite = TRUE to run the excel file</span></span>
<span>  <span class="co"># excel = TRUE, overwrite = TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/TADA_TableExport.html">TADA_TableExport</a></span><span class="op">(</span><span class="va">NCTC_ParamUseRef_Final</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="next-steps">Next steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>Stay tuned! Future vignettes aim to assist with next steps in the
analysis process, including:</p>
<ul>
<li><p>Defining the water quality criteria and methodologies used for
each unique combination of ATTAINS assessment unit, use, and
parameter.</p></li>
<li><p>Summarizing results by: (1) individual magnitude
excursions.</p></li>
</ul>
<p>Disclaimer: The EPATADA Module 3 functions are under active
development. EPATADA functions do not constitute current EPA
recommendations, policy or regulatory requirements. Organizations may
optionally choose to use EPATADA as a a tool in their process. Use of
EPATADA is not required.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cristina Mullin, Hillary Marler, Jacob Greif, Elise Hinman, Kenny Wong, Kathryn Willi, Matt Brousil, Kathleen Healy, Justin Bousquin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
