<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="An overview of TADA Module 2 functions and a recommended workflow.">
<title>TADA Module 2: Geospatial Functions • TADA</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="TADA Module 2: Geospatial Functions">
<meta property="og:description" content="An overview of TADA Module 2 functions and a recommended workflow.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">TADA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/CONTRIBUTING.html">Contributing</a>
    <a class="dropdown-item" href="../articles/TADAModule1_AdvancedTraining.html">TADA Module 1: Training for Intermediate/Advanced R Users</a>
    <a class="dropdown-item" href="../articles/TADAModule1_BeginnerTraining.html">TADA Module 1: Training for Beginner R Users</a>
    <a class="dropdown-item" href="../articles/TADAModule1.html">TADA Module 1: Water Quality Portal Data Discovery and Cleaning</a>
    <a class="dropdown-item" href="../articles/TADAModule2.html">TADA Module 2: Geospatial Functions</a>
    <a class="dropdown-item" href="../articles/WQXValidationService.html">WQX QAQC Service User Guide</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USEPA/TADA/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>TADA Module 2: Geospatial Functions</h1>
                        <h4 data-toc-skip class="author">TADA Team</h4>
            
            <h4 data-toc-skip class="date">2024-04-22</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/USEPA/TADA/blob/HEAD/vignettes/TADAModule2.Rmd" class="external-link"><code>vignettes/TADAModule2.Rmd</code></a></small>
      <div class="d-none name"><code>TADAModule2.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="welcome">Welcome!<a class="anchor" aria-label="anchor" href="#welcome"></a>
</h2>
<p>Thank you for your interest in Tools for Automated Data Analysis
(TADA). TADA is an open-source tool set built in the R programming
language. This <a href="https://bookdown.org/yihui/rmarkdown/" class="external-link">RMarkdown</a> document
walks users through how to download the TADA R package from GitHub,
access and parameterize several important functions, and create basic
visualizations with a sample data set.</p>
<p><strong>Note: TADA is still under development. New functionality is
added weekly, and sometimes we need to make bug fixes in response to
tester and user feedback. We appreciate your feedback, patience, and
interest in these helpful tools.</strong></p>
<p><strong>If you are interested in contributing to TADA development,
more information is available at:</strong></p>
<p><a href="https://usepa.github.io/TADA/articles/CONTRIBUTING.html"><strong>Contributing</strong></a></p>
<p><strong>We welcome collaboration with external partners.</strong></p>
</div>
<div class="section level2">
<h2 id="install-and-load-packages">Install and load packages<a class="anchor" aria-label="anchor" href="#install-and-load-packages"></a>
</h2>
<p>First, install and load the remotes package specifying the repo. This
is needed before installing TADA because it is only available on
GitHub.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span>,</span>
<span>  repos <span class="op">=</span> <span class="st">"http://cran.us.r-project.org"</span></span>
<span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span></span></code></pre></div>
<p>Next, install and load TADA using the remotes package. TADA R Package
dependencies will also be downloaded automatically from CRAN with the
TADA install. You may be prompted in the console to update dependency
packages that have more recent versions available. If you see this
prompt, it is recommended to update all of them (enter 1 into the
console).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"USEPA/TADA"</span>,</span>
<span>  ref <span class="op">=</span> <span class="st">"updates"</span>,</span>
<span>  dependencies <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Finally, use the <strong>library()</strong> function to load the TADA
R Package into your R session.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usepa.github.io/TADA/">TADA</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="help-pages">Help pages<a class="anchor" aria-label="anchor" href="#help-pages"></a>
</h2>
<p>All TADA R package functions have their own individual help pages,
listed on the <a href="https://usepa.github.io/TADA/reference/index.html">Function
reference</a> page on the GitHub site. Users can also access the help
page for a given function in R or RStudio using the following format
(example below): <code>?TADA::[name of TADA function]</code></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Access help page for TADA_DataRetrieval</span></span>
<span><span class="op">?</span><span class="va">TADA_DataRetrieval</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="geospatial-functions-in-tada">Geospatial Functions in TADA<a class="anchor" aria-label="anchor" href="#geospatial-functions-in-tada"></a>
</h2>
<p>This vignette represents functions that provide users the option to
convert TADA Water Quality Portal data into a geospatial sf object as
well as to associate water quality observations with their nearest
state-defined water quality assessment units in ATTAINS.</p>
<p><strong>A Note About ATTAINS:</strong></p>
<p>The Assessment, Total Maximum Daily Load (TMDL) Tracking and
Implementation System (<a href="https://www.epa.gov/waterdata/attains" class="external-link">ATTAINS</a>) is an online
platform that organizes and combines each state and participating
tribe’s Clean Water Act reporting data into a single data repository.
The geospatial component of ATTAINS includes spatial representations of
each entities assessment units as well as their assigned designated
uses, their most recent EPA reporting category (i.e., their impairment
status), their impaired designated uses, and the parameter(s) causing
the impairment.</p>
<p>Within an assessment unit, the criteria or thresholds used to assess
water quality typically remain the same and all water features are
assessed as one entity (although there are some exceptions, for example
if a single assessment unit crosses multiple ecoregions). Depending on
the state or tribe, these assessment units can be a specific point or
series of points along a waterbody such as a river or lake, a river
reach (line), an entire waterbody such as a river or lake (polygon), or
even an entire watershed. In other words, assessment units can take the
form of point, line, and area (oplygon) features, or some combination of
all of them. Moreover, it is possible that some assessment units are not
geospatially referenced at all, meaning they are not captured in the
ATTAINS geospatial database.</p>
</div>
<div class="section level2">
<h2 id="tada_makespatial">
<code>TADA_MakeSpatial()</code><a class="anchor" aria-label="anchor" href="#tada_makespatial"></a>
</h2>
<p>This function converts any Water Quality Portal (WQP)-style dataframe
with latitude/longitude data into a geospatial sf object. To run the
function, the user supplies a WQP dataframe and the coordinate reference
system that they want the spatial object to be in (the default is WGS
84). For the function to work properly, the input dataframe must have -
at a minimum - WQP observation coordinates in “LongitudeMeasure” and
“LatitudeMeasure” and a “HorizontalCoordinateReferenceSystemDatumName”
column.</p>
<div class="section level4">
<h4 id="using-tada_makespatial">Using <code>TADA_MakeSpatial()</code><a class="anchor" aria-label="anchor" href="#using-tada_makespatial"></a>
</h4>
<p>First, we will need to pull in some TADA Water Quality Portal
Data:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># pH data in Larimer County, Colorado for the year 2020.</span></span>
<span><span class="va">TADA_dataframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/TADA_DataRetrieval.html">TADA_DataRetrieval</a></span><span class="op">(</span></span>
<span>  startDate <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>  endDate <span class="op">=</span> <span class="st">"2020-12-31"</span>,</span>
<span>  characteristicName <span class="op">=</span> <span class="st">"pH"</span>,</span>
<span>  countycode <span class="op">=</span> <span class="st">"US:08:069"</span>,</span>
<span>  applyautoclean <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Now, we can make the water quality data spatial by running
<code><a href="../reference/TADA_MakeSpatial.html">TADA_MakeSpatial()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># default CRS is WGS84 (4326)</span></span>
<span><span class="va">TADA_spatial</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/TADA_MakeSpatial.html">TADA_MakeSpatial</a></span><span class="op">(</span><span class="va">TADA_dataframe</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span></code></pre></div>
<p>This new spatial object is identical to the original TADA dataset,
but now includes a “geometry” column that allows for mapping and
additional geospatial capabilities. Enter <code><a href="../reference/TADA_MakeSpatial.html">?TADA_MakeSpatial</a></code>
into the console to review another example of this function in use and
additional information.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/leaflet.html" class="external-link">leaflet</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/addProviderTiles.html" class="external-link">addProviderTiles</a></span><span class="op">(</span><span class="st">"Esri.WorldTopoMap"</span>,</span>
<span>    group <span class="op">=</span> <span class="st">"World topo"</span>,</span>
<span>    options <span class="op">=</span> <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/addProviderTiles.html" class="external-link">providerTileOptions</a></span><span class="op">(</span></span>
<span>      updateWhenZooming <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>      updateWhenIdle <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/remove.html" class="external-link">clearShapes</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet.extras</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/leaflet.extras/man/addResetMapButton.html" class="external-link">addResetMapButton</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/addLegend.html" class="external-link">addLegend</a></span><span class="op">(</span></span>
<span>    position <span class="op">=</span> <span class="st">"bottomright"</span>,</span>
<span>    colors <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>    labels <span class="op">=</span> <span class="st">"Water Quality Observation(s)"</span>,</span>
<span>    opacity <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/map-layers.html" class="external-link">addCircleMarkers</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">TADA_spatial</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"grey"</span>, fillColor <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>    fillOpacity <span class="op">=</span> <span class="fl">0.8</span>, stroke <span class="op">=</span> <span class="cn">TRUE</span>, weight <span class="op">=</span> <span class="fl">1.5</span>, radius <span class="op">=</span> <span class="fl">6</span>,</span>
<span>    popup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>      <span class="st">"Site ID: "</span>,</span>
<span>      <span class="va">TADA_spatial</span><span class="op">$</span><span class="va">MonitoringLocationIdentifier</span>,</span>
<span>      <span class="st">"&lt;br&gt; Site Name: "</span>,</span>
<span>      <span class="va">TADA_spatial</span><span class="op">$</span><span class="va">MonitoringLocationName</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="tada_getattains">
<code>TADA_GetATTAINS()</code><a class="anchor" aria-label="anchor" href="#tada_getattains"></a>
</h2>
<p>This function pulls in ATTAINS data from the EPA’s ATTAINS Assessment
Geospatial Service and links it to TADA-pulled Water Quality Portal
observations. For the function to work properly, the input dataframe
must have - at a minimum - WQP observation coordinates in
“LongitudeMeasure” and “LatitudeMeasure” columns and a
“HorizontalCoordinateReferenceSystemDatumName” column.</p>
<p>Users also have the option of returning the ATTAINS geospatial sf
objects with their ATTAINS-linked Water Quality Portal dataframe. If
<code>return_sf = TRUE</code>, the function returns a list containing
the dataframe plus shapefile objects named
<code>ATTAINS_catchments</code>, <code>ATTAINS_lines</code>,
<code>ATTAINS_points</code>, and <code>ATTAINS_polygons</code>. Note, if
any of these shapefile objects are empty, this indicates that there are
no ATTAINS objects of that type intersecting any WQP catchment.</p>
<p>Regardless of the user’s decision on returning the ATTAINS sf
objects, <code><a href="../reference/TADA_GetATTAINS.html">TADA_GetATTAINS()</a></code> always returns a dataframe
containing the original TADA WQP dataset, plus new columns representing
the ATTAINS assessment unit(s) that fall within the same NHDPlus HR
catchment as them. This means that it is possible for a single TADA WQP
observation to have multiple ATTAINS assessment units linked to it and
subsequently more than one row of data. Such WQP observations can be
identified using the new <code>index</code> column (i.e., multiple rows
with the same index value are the same observation).</p>
<div class="section level4">
<h4 id="using-tada_getattains">Using <code>TADA_GetATTAINS()</code><a class="anchor" aria-label="anchor" href="#using-tada_getattains"></a>
</h4>
<p>Using either our original <code>TADA_dataframe</code> <em>or</em> the
geospatial version <code>TADA_spatial</code>, we can pull in the ATTAINS
features that are within the same NHD HR catchment as our
observations:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">TADA_with_ATTAINS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/TADA_GetATTAINS.html">TADA_GetATTAINS</a></span><span class="op">(</span><span class="va">TADA_dataframe</span>, return_sf <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">TADA_with_ATTAINS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/TADA_GetATTAINS.html">TADA_GetATTAINS</a></span><span class="op">(</span><span class="va">TADA_spatial</span>, return_sf <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>This new <code>TADA_with_ATTAINS</code> object is a modification of
the original TADA Water Quality Portal dataframe that now has additional
columns associated with the ATTAINS assessment unit(s) that lie in the
same NHD HR catchment as them (these columns are prefixed with
“ATTAINS”). Moreover, because our <code>TADA_with_ATTAINS</code> object
contains more rows than the original TADA dataframe, we can deduce that
some Water Quality Portal observations fall within an NHD HR catchment
that contains more than one ATTAINS assessment unit.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">TADA_with_ATTAINS_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/TADA_GetATTAINS.html">TADA_GetATTAINS</a></span><span class="op">(</span><span class="va">TADA_dataframe</span>, return_sf <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">TADA_with_ATTAINS_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/TADA_GetATTAINS.html">TADA_GetATTAINS</a></span><span class="op">(</span><span class="va">TADA_spatial</span>, return_sf <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>If we set <code>return_sf = TRUE</code> as done to create the
<code>TADA_with_ATTAINS_list</code> object above, we also now have all
the raw ATTAINS features associated with these TADA Water Quality Portal
observations stored in a list with the TADA dataframe.</p>
<p>Now, let’s select specific columns from the TADA_with_ATTAINS
dataframe, and create a new datafream with ONLY the unique combinations
of WQP MonitoringLocationIdentifier’s and ATTAINS Assessment Unit
Identifiers.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">TADA_with_ATTAINS_subset</span> <span class="op">&lt;-</span> <span class="va">TADA_with_ATTAINS</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"LongitudeMeasure"</span>, <span class="st">"LatitudeMeasure"</span>, <span class="st">"MonitoringLocationTypeName"</span>,</span>
<span>      <span class="st">"MonitoringLocationIdentifier"</span>, <span class="st">"ATTAINS.assessmentunitidentifier"</span>,</span>
<span>      <span class="st">"ATTAINS.overallstatus"</span>, <span class="st">"ATTAINS.isassessed"</span>, <span class="st">"ATTAINS.isimpaired"</span>,</span>
<span>      <span class="st">"ATTAINS.organizationid"</span>, <span class="st">"ATTAINS.assessmentunitname"</span>,</span>
<span>      <span class="st">"ATTAINS.reportingcycle"</span>, <span class="st">"ATTAINS.waterbodyreportlink"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span>.keep_all <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>Enter <code><a href="../reference/TADA_GetATTAINS.html">?TADA_GetATTAINS</a></code> into the console to review
another example of this function in use and additional information.</p>
</div>
</div>
<div class="section level2">
<h2 id="tada_viewattains">
<code>TADA_ViewATTAINS()</code><a class="anchor" aria-label="anchor" href="#tada_viewattains"></a>
</h2>
<p>This function visualizes the raw ATTAINS features that are linked to
the TADA Water Quality Portal observations that are generated in
<code><a href="../reference/TADA_GetATTAINS.html">TADA_GetATTAINS()</a></code> when <code>return_sf = TRUE</code>. For
the function to work properly, the input dataframe must be the list
produced from <code><a href="../reference/TADA_GetATTAINS.html">TADA_GetATTAINS()</a></code> with
<code>return_sf = TRUE</code>. The map also displays the Water Quality
Portal monitoring locations used to find the ATTAINS features.</p>
<div class="section level4">
<h4 id="using-tada_viewattains">Using <code>TADA_ViewATTAINS()</code><a class="anchor" aria-label="anchor" href="#using-tada_viewattains"></a>
</h4>
<p>Let’s view the data associated with our
<code>TADA_with_ATTAINS_list</code> object! Enter
<code><a href="../reference/TADA_ViewATTAINS.html">?TADA_ViewATTAINS</a></code> into the console to review another
example query and additional information.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/TADA_ViewATTAINS.html">TADA_ViewATTAINS</a></span><span class="op">(</span><span class="va">TADA_with_ATTAINS_list</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by U.S. Environmental Protection Agency, Cristina Mullin, Jacob Greif, Elise Hinman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
