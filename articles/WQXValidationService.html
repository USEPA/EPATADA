<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>WQX QAQC Service User Guide • EPATADA</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="WQX QAQC Service User Guide">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EPATADA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/CONTRIBUTING.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../articles/TADAAssessmentUnitUseCase.html">TADA: Assessment Unit Use Case Demo</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_AdvancedTraining.html">TADA Module 1: Training for Intermediate/Advanced R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_BeginnerTraining.html">TADA Module 1: Training for Beginner R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1.html">TADA Module 1: Water Quality Portal Data Discovery and Cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule2.html">TADA Module 2: Geospatial Functions</a></li>
    <li><a class="dropdown-item" href="../articles/TADAWaterSciConWorkshopDemo.html">TADA: WaterSciCon Workshop Demo</a></li>
    <li><a class="dropdown-item" href="../articles/WQXValidationService.html">WQX QAQC Service User Guide</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USEPA/EPATADA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>WQX QAQC Service User Guide</h1>
                        <h4 data-toc-skip class="author">TADA Team</h4>
            
            <h4 data-toc-skip class="date">2024-10-22</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EPATADA/blob/develop/vignettes/WQXValidationService.Rmd" class="external-link"><code>vignettes/WQXValidationService.Rmd</code></a></small>
      <div class="d-none name"><code>WQXValidationService.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="tada-leverages-the-water-quality-exchange-wqx-qaqc-service">TADA Leverages the Water Quality eXchange (WQX) QAQC Service<a class="anchor" aria-label="anchor" href="#tada-leverages-the-water-quality-exchange-wqx-qaqc-service"></a>
</h2>
<p>This is a overview of the the WQX Quality Assurance and Quality
Control (QAQC) data submission service, and how TADA leverages that
service to flag potentially invalid data in the Water Quality Portal
(WQP). It will cover: 1) an overview of all available WQX QAQC tests for
data submissions, 2) which of these QAQC tests are also available in
TADA for flagging potentially invalid WQP data, and 3) how to interpret
and provide feedback on the validation reference tables referenced by
WQX and TADA for this QAQC service.</p>
</div>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>The WQX expectation for submissions is that users submit only QAQC’d
data and utilize WQX elements to ensure the data is of “documented
quality”. The WQX team has historically hosted data quality working
groups aimed at creating best practices and required data elements for
WQX 3.0 for specific parameter groups such as nutrients, metals and
biological data. These resources have supported users to submit data of
documented quality. This approach has been broadly successful, but
because it is not an enforceable approach it has allowed for data of
varying quality to be shared. In response, the WQX team recently
released a QAQC service in 2022 to test and flag data submissions for
potential errors, and provide the data submitter with a chance to make
edits to improve the quality of their data, before it goes into the WQP.
However the new WQX services will not flag or fix data historical that
is already in the WQP. Therefore, the TADA R package leverages the WQX
QAQC Validation Reference tables in the R package to make these same
tests available on WQP outbound data using R.</p>
</div>
<div class="section level2">
<h2 id="available-tests">Available Tests<a class="anchor" aria-label="anchor" href="#available-tests"></a>
</h2>
<p>Tests available in both WQX Web for data submissions &amp; the TADA R
Package for use with data retrieved from the WQP:</p>
<ul>
<li>
<p>Tests that Leverage the WQX Validation Table</p>
<ul>
<li>
<p>Flag invalid characteristic and unit combinations (e.g., flag
data if mg/L or °C was used for pH; flag if units were left blank, NA,
None, etc. but are required for the characteristic)</p>
<ul>
<li><a href="https://usepa.github.io/EPATADA/reference/TADA_FlagResultUnit.html">TADA_FlagResultUnit()</a></li>
</ul>
</li>
<li>
<p>Flag data without methods, with uncommon methods, or with invalid
methods for the characteristic. This is contingent on the activity type
since some activity types don’t require methods.</p>
<ul>
<li><a href="https://usepa.github.io/EPATADA/reference/TADA_FlagMethod.html">TADA_FlagMethod()</a></li>
</ul>
</li>
<li>
<p>Flag data with invalid characteristic and fraction
combinations</p>
<ul>
<li><a href="https://usepa.github.io/EPATADA/reference/TADA_FlagFraction.html">TADA_FlagFraction()</a></li>
</ul>
</li>
<li>
<p>Flag data with invalid characteristic and speciation
combination</p>
<ul>
<li><a href="https://usepa.github.io/EPATADA/reference/TADA_FlagSpeciation.html">TADA_FlagSpeciation()</a></li>
</ul>
</li>
<li>
<p>Flag results that do not have an approved QAPP and/or do not
include a QAPP attachment</p>
<ul>
<li><p><a href="https://usepa.github.io/EPATADA/reference/TADA_FindQAPPDoc.html">TADA_FindQAPPDoc()</a></p></li>
<li><p><a href="https://usepa.github.io/EPATADA/reference/TADA_FindQAPPApproval.html">TADA_FindQAPPApproval()</a></p></li>
</ul>
</li>
<li>
<p>Flag results above or below national thresholds using the
Interquartile Range (IQR) method. The IQR method is defined as the
difference between the 75% percentile and the 25% percentile of your
dataset.</p>
<ul>
<li>
<p>Upper Threshold= 75th Percentile + 1.5 * (75th percentile - 25th
percentile)</p>
<ul>
<li><a href="https://usepa.github.io/EPATADA/reference/TADA_FlagAboveThreshold.html">TADA_FlagAboveThreshold()</a></li>
</ul>
</li>
<li>
<p>Lower Threshold= 25th Percentile - 1.5 * (75th percentile - 25th
percentile)</p>
<ul>
<li><a href="https://usepa.github.io/EPATADA/reference/TADA_FlagBelowThreshold.html">TADA_FlagBelowThreshold()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a href="https://commons.wikimedia.org/wiki/File:Boxplot_vs_PDF.svg" class="external-link"><img src="images%2FIQR.png" alt="[Boxplot](https://en.wikipedia.org/wiki/Boxplot “Boxplot”) (with an interquartile range) and a [probability density function](https://en.wikipedia.org/wiki/Probability_density_function “Probability density function”) (pdf) of a Normal N(0,σ2) Population. Attribution: Jhguch at en.wikipedia, [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5), via Wikimedia Commons."></a></p>
<p>Additional tests only available in WQX Web and Node Submissions (for
now):</p>
<ul>
<li>
<p>Location</p>
<ul>
<li><p>Flag data where accuracy of lat/long is less than three three
decimal degrees (e.g., 38.88°, -77.00°)</p></li>
<li><p>Flag data where the lat/long assigned to monitoring sites is NOT
in the state and country included in metadata</p></li>
<li><p>Flag if monitoring locations nearby each other are likely the
same based on three decimal degrees precision. Includes two flags - one
within your org and one national (across all orgs). If they are, then
provide user an option to use the existing monitoring location instead
of creating a new one [expand here].</p></li>
</ul>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="providing-feedback-on-validation-tables">Providing Feedback on Validation Tables<a class="anchor" aria-label="anchor" href="#providing-feedback-on-validation-tables"></a>
</h2>
<p>All WQX Domain Tables are available <a href="https://www.epa.gov/waterdata/storage-and-retrieval-and-water-quality-exchange-domain-services-and-downloads" class="external-link">HERE</a>.
TADA leverages many of the WQX domain tables.</p>
<ul>
<li>
<p><a href="https://cdx.epa.gov/wqx/download/DomainValues/QAQCCharacteristicValidation_CSV.zip" class="external-link">QAQCCharacteristicValidation
(ZIP)</a> | (<a href="https://cdx.epa.gov/wqx/download/DomainValues/QAQCCharacteristicValidation.zip" class="external-link">XML</a>) 
| (<a href="https://cdx.epa.gov/wqx/download/DomainValues/QAQCCharacteristicValidation.CSV" class="external-link">CSV)</a></p>
<ul>
<li>
<p>Both WQX and TADA leverage the table above to flag invalid and
uncommon results. This reference table is used in the following TADA
functions:</p>
<ul>
<li><p><a href="https://usepa.github.io/EPATADA/reference/TADA_FlagAboveThreshold.html">TADA_FlagAboveThreshold()</a></p></li>
<li><p><a href="https://usepa.github.io/EPATADA/reference/TADA_FlagBelowThreshold.html">TADA_FlagBelowThreshold()</a></p></li>
<li><p><a href="https://usepa.github.io/EPATADA/reference/TADA_FlagResultUnit.html">TADA_FlagResultUnit()</a></p></li>
<li><p><a href="https://usepa.github.io/EPATADA/reference/TADA_FlagMethod.html">TADA_FlagMethod()</a></p></li>
<li><p><a href="https://usepa.github.io/EPATADA/reference/TADA_FlagFraction.html">TADA_FlagFraction()</a></p></li>
<li><p><a href="https://usepa.github.io/EPATADA/reference/TADA_FlagSpeciation.html">TADA_FlagSpeciation()</a></p></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="https://cdx.epa.gov/wqx/download/DomainValues/MeasureUnit_CSV.zip" class="external-link">MeasureUnit
(ZIP)</a> | (<a href="https://cdx.epa.gov/wqx/download/DomainValues/MeasureUnit.zip" class="external-link">XML</a>)| <a href="https://cdx.epa.gov/wqx/download/DomainValues/MeasureUnit.CSV" class="external-link">(CSV)</a></p>
<ul>
<li><p>Both WQX and TADA leverage the table above to convert all data
for each unique characteristic to a consistent unit, so that results can
then we assessed against the WQX upper and lower thresholds in the
validation table. Target units for each charactersitic are included in
the MeasureUnit domain table. TADA leverages this table to convert all
data for each unique characteristic to a consistent target unit. See
relevant TADA functions:</p></li>
<li><p>See TADA Function: <a href="https://usepa.github.io/EPATADA/reference/TADA_ConvertResultUnits.html">TADA_ConvertResultUnits()</a></p></li>
</ul>
</li>
</ul>
<p>All TADA Reference and Validation Tables are also available in the R
Package <a href="https://github.com/USEPA/EPATADA/tree/develop/inst/extdata" class="external-link">HERE</a>.
TADA pulls the WQX Validation Table and other domain tables into TADA
and updates them automatically whenever changes are made</p>
<ul>
<li><p><a href="https://github.com/USEPA/EPATADA/blob/develop/inst/extdata/WQXcharValRef.csv" class="external-link uri">https://github.com/USEPA/EPATADA/blob/develop/inst/extdata/WQXcharValRef.csv</a></p></li>
<li><p><a href="https://github.com/USEPA/EPATADA/blob/develop/inst/extdata/WQXunitRef.csv" class="external-link uri">https://github.com/USEPA/EPATADA/blob/develop/inst/extdata/WQXunitRef.csv</a></p></li>
</ul>
<p>WQX and TADA users can review and provide feedback on the validation
table and/or target units assigned, and provide feedback by emailing the
WQX helpdesk (WQX@epa.gov).</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by U.S. Environmental Protection Agency, Cristina Mullin, Hillary Marler, Jacob Greif, Elise Hinman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
