<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add or Update Monitoring Location Identifiers in ATTAINS — TADA_UpdateMonitoringLocationsInATTAINS • EPATADA</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add or Update Monitoring Location Identifiers in ATTAINS — TADA_UpdateMonitoringLocationsInATTAINS"><meta name="description" content="This function creates the batch upload files needed to add or update
Monitoring Location Identifiers in ATTAINS Assessment Unit profiles. Users
can specify whether all records should be overwritten (replaced) or if new
Monitoring Location Identifiers should be appended (added) to existing
records."><meta property="og:description" content="This function creates the batch upload files needed to add or update
Monitoring Location Identifiers in ATTAINS Assessment Unit profiles. Users
can specify whether all records should be overwritten (replaced) or if new
Monitoring Location Identifiers should be appended (added) to existing
records."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EPATADA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/CONTRIBUTING.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../articles/TADAAssessmentUnitUseCase.html">TADA: Assessment Unit Use Case Demo</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_AdvancedTraining.html">TADA Module 1: Training for Intermediate/Advanced R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_BeginnerTraining.html">TADA Module 1: Training for Beginner R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1.html">TADA Module 1: Water Quality Portal Data Discovery and Cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule2.html">TADA Module 2: Geospatial Functions</a></li>
    <li><a class="dropdown-item" href="../articles/TADAWaterSciConWorkshopDemo.html">TADA: WaterSciCon Workshop Demo</a></li>
    <li><a class="dropdown-item" href="../articles/WQXValidationService.html">WQX QAQC Service User Guide</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USEPA/EPATADA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Add or Update Monitoring Location Identifiers in ATTAINS</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EPATADA/blob/develop/R/CrosswalksFromATTAINS.R" class="external-link"><code>R/CrosswalksFromATTAINS.R</code></a></small>
      <div class="d-none name"><code>TADA_UpdateMonitoringLocationsInATTAINS.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates the batch upload files needed to add or update
Monitoring Location Identifiers in ATTAINS Assessment Unit profiles. Users
can specify whether all records should be overwritten (replaced) or if new
Monitoring Location Identifiers should be appended (added) to existing
records.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">TADA_UpdateMonitoringLocationsInATTAINS</span><span class="op">(</span></span>
<span>  org_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  crosswalk <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  attains_replace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  wqp_data_links <span class="op">=</span> <span class="st">"add"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-org-id">org_id<a class="anchor" aria-label="anchor" href="#arg-org-id"></a></dt>
<dd><p>Character argument. The ATTAINS organization identifier must
be supplied by the user. A list of organization identifiers can be found by
downloading the ATTAINS Domains Excel file:
https://www.epa.gov/system/files/other-files/2023-09/DOMAINS.xlsx.
Organization identifiers are listed in the "OrgName" tab. The "code" column
contains the organization identifiers that should be used for this param.</p></dd>


<dt id="arg-crosswalk">crosswalk<a class="anchor" aria-label="anchor" href="#arg-crosswalk"></a></dt>
<dd><p>A user-supplied dataframe with the columns
ASSESSMENT_UNIT_ID, MS_LOCATION_ID, MS_ORG_ID, and MONITORING_DATA_LINK_TEXT
is required. The ASSESSMENT_UNIT_ID and MS_LOCATION_ID must be filled out
in order to use this function. The additional columns,
MONITORING_DATA_LINK_TEXT, containing a single URL or "; " separated URLs
linking to information about the Monitoring Location, and MS_ORG_ID,
containing the WQP organization identifier for the Monitoring Location can
be left blank and the function will still run. Data link URLS to WQP site
pages cannot be automatically generated by this function unless the
MS_ORG_ID column is populated with the WQP OrganizationIdentifier. When
crosswalk = NULL, the crosswalk will be downloaded from ATTAINS. This allows
users to add URLs for the Water Quality Portal Data Site pages to the ATTAINS
Assessment Unit profile where possible without updating other information
in ATTAINS.</p></dd>


<dt id="arg-attains-replace">attains_replace<a class="anchor" aria-label="anchor" href="#arg-attains-replace"></a></dt>
<dd><p>Character argument. When attains_replace = FALSE, all
Monitoring Location Identifiers in the user supplied crosswalk will be
appended to the existing ATTAINS crosswalk. When attains_replace = TRUE,
Monitoring Location Identifiers will only be retained if they are in the
user supplied crosswalk. Default equals FALSE.</p></dd>


<dt id="arg-wqp-data-links">wqp_data_links<a class="anchor" aria-label="anchor" href="#arg-wqp-data-links"></a></dt>
<dd><p>Character argument. When wqp_data_links is equal to
"add" or "replace", the function will build the URL for the Water Quality
Portal Data Site page for each Monitoring Location Identifier in the data
frame. It will examine the response code of each URL and only retain those
with a 200 response, which indicates the URL is valid. When
wqp_data_links = "add", the URL will be added to any existing text in the
MS_DATA_LINK_TEXT column. When wqp_data_links = "replace", the URL will
replace any existing text in the MS_DATA_LINK_TEXT column. When
wqp_data_links = "none", no URLs will be created or added to the returned
data frame. Default is wqp_data_links = "add".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The csv batch upload files for ATTAINS to add or update
Monitoring Locations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Alaska example to updated data links with no user supplied crosswalk</span></span></span>
<span class="r-in"><span><span class="va">AK_adddatalinks</span> <span class="op">&lt;-</span> <span class="fu">TADA_UpdateMonitoringLocationsInATTAINS</span><span class="op">(</span></span></span>
<span class="r-in"><span>  org_id <span class="op">=</span> <span class="st">"AKDECWQ"</span>,</span></span>
<span class="r-in"><span>  crosswalk <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  attains_replace <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  wqp_data_links <span class="op">=</span> <span class="st">"replace"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Alaska example using a user supplied crosswalk to update entries in </span></span></span>
<span class="r-in"><span><span class="co"># ATTAINS by appending user supplied information to ATTAINS crosswalk</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># example monitoring location identifiers</span></span></span>
<span class="r-in"><span><span class="va">ASSESSMENT_UNIT_ID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"AK_M_1021211_000"</span>, <span class="st">"AK_M_1021008_000"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"AK_M_1021109_013"</span>, <span class="st">"AK_M_1021109_013"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"AK_M_1021109_013"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># example organization identifiers</span></span></span>
<span class="r-in"><span><span class="va">MS_ORG_ID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AKDECWQ"</span>, <span class="st">"AKDECWQ"</span>, <span class="st">"AKDECWQ"</span>, <span class="st">"AKDECWQ"</span>, <span class="st">"AKDECWQ"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># example assessment units</span></span></span>
<span class="r-in"><span><span class="va">MS_LOCATION_ID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ExampleSite1"</span>, <span class="st">"ExampleSite2"</span>, <span class="st">"ExampleSite3"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"ExampleSite4"</span>, <span class="st">"ExampleSite5"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># example urls</span></span></span>
<span class="r-in"><span><span class="va">MONITORING_DATA_LINK_TEXT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span><span class="st">"https://www.waterqualitydata.us/provider/STORET/AKDECWQ/"</span>,</span></span>
<span class="r-in"><span><span class="st">"https://www.waterqualitydata.us/provider/STORET/AKDECWQ/"</span>,</span></span>
<span class="r-in"><span><span class="st">"https://www.waterqualitydata.us/provider/STORET/AKDECWQ/"</span>,</span></span>
<span class="r-in"><span><span class="st">"https://www.waterqualitydata.us/provider/STORET/AKDECWQ/"</span>,</span></span>
<span class="r-in"><span><span class="st">"https://www.waterqualitydata.us/provider/STORET/AKDECWQ/"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create example crosswalk data frame</span></span></span>
<span class="r-in"><span><span class="va">ex.user.cw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">MS_LOCATION_ID</span>, <span class="va">MS_ORG_ID</span>, <span class="va">ASSESSMENT_UNIT_ID</span>,</span></span>
<span class="r-in"><span>                         <span class="va">MONITORING_DATA_LINK_TEXT</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">AK_appenduserdata</span> <span class="op">&lt;-</span> <span class="fu">TADA_UpdateMonitoringLocationsInATTAINS</span><span class="op">(</span></span></span>
<span class="r-in"><span>org_id <span class="op">=</span> <span class="st">"AKDECWQ"</span>, </span></span>
<span class="r-in"><span>crosswalk <span class="op">=</span> <span class="va">ex.user.cw</span>, </span></span>
<span class="r-in"><span>attains_replace <span class="op">=</span> <span class="cn">FALSE</span>, </span></span>
<span class="r-in"><span>wqp_data_links <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by U.S. Environmental Protection Agency, Cristina Mullin, Hillary Marler, Jacob Greif, Elise Hinman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

