<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Invalid coordinates — TADA_FlagCoordinates • EPATADA</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Invalid coordinates — TADA_FlagCoordinates"><meta name="description" content='This function identifies and flags invalid coordinate data. When
clean_outsideUSA = "no" and clean_imprecise = FALSE,
a column will be appended titled "TADA.InvalidCoordinates.Flag" with the following
flags: 1) If the latitude is less than zero, the row will be
flagged with "LAT_OutsideUSA" (with the exception of American Samoa,
Northern Mariana Islands, and Guam), 2) If the longitude is greater than zero AND less than 145,
the row will be flagged as "LONG_OutsideUSA" (with the exception of
American Samoa, Northern Mariana Islands, and Guam), and 3) Finally,
precision can be measured by the number of decimal places in the latitude and longitude
provided. If either the latitude or longitude does not have at least three numbers to the
right of the decimal point, the row will be flagged as "Imprecise". Occasionally
latitude and longitude measurements are flagged as outside of the United States
because the data was entered as negative when it should be positive or vice versa.
This function offers the option of clean_outsideUSA = "change sign" to fix this
issue. However, data owners should fix the raw data through WQX. For assistance
with changing raw data, email the WQX help desk: WQX@epa.gov'><meta property="og:description" content='This function identifies and flags invalid coordinate data. When
clean_outsideUSA = "no" and clean_imprecise = FALSE,
a column will be appended titled "TADA.InvalidCoordinates.Flag" with the following
flags: 1) If the latitude is less than zero, the row will be
flagged with "LAT_OutsideUSA" (with the exception of American Samoa,
Northern Mariana Islands, and Guam), 2) If the longitude is greater than zero AND less than 145,
the row will be flagged as "LONG_OutsideUSA" (with the exception of
American Samoa, Northern Mariana Islands, and Guam), and 3) Finally,
precision can be measured by the number of decimal places in the latitude and longitude
provided. If either the latitude or longitude does not have at least three numbers to the
right of the decimal point, the row will be flagged as "Imprecise". Occasionally
latitude and longitude measurements are flagged as outside of the United States
because the data was entered as negative when it should be positive or vice versa.
This function offers the option of clean_outsideUSA = "change sign" to fix this
issue. However, data owners should fix the raw data through WQX. For assistance
with changing raw data, email the WQX help desk: WQX@epa.gov'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EPATADA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/CONTRIBUTING.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_AdvancedTraining.html">TADA Module 1: Training for Intermediate/Advanced R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_BeginnerTraining.html">TADA Module 1: Training for Beginner R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1.html">TADA Module 1: Water Quality Portal Data Discovery and Cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule2.html">TADA Module 2: Geospatial Functions</a></li>
    <li><a class="dropdown-item" href="../articles/WQXValidationService.html">WQX QAQC Service User Guide</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USEPA/EPATADA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Invalid coordinates</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EPATADA/blob/develop/R/ResultFlagsIndependent.R" class="external-link"><code>R/ResultFlagsIndependent.R</code></a></small>
      <div class="d-none name"><code>TADA_FlagCoordinates.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function identifies and flags invalid coordinate data. When
clean_outsideUSA = "no" and clean_imprecise = FALSE,
a column will be appended titled "TADA.InvalidCoordinates.Flag" with the following
flags: 1) If the latitude is less than zero, the row will be
flagged with "LAT_OutsideUSA" (with the exception of American Samoa,
Northern Mariana Islands, and Guam), 2) If the longitude is greater than zero AND less than 145,
the row will be flagged as "LONG_OutsideUSA" (with the exception of
American Samoa, Northern Mariana Islands, and Guam), and 3) Finally,
precision can be measured by the number of decimal places in the latitude and longitude
provided. If either the latitude or longitude does not have at least three numbers to the
right of the decimal point, the row will be flagged as "Imprecise". Occasionally
latitude and longitude measurements are flagged as outside of the United States
because the data was entered as negative when it should be positive or vice versa.
This function offers the option of clean_outsideUSA = "change sign" to fix this
issue. However, data owners should fix the raw data through WQX. For assistance
with changing raw data, email the WQX help desk: <a href="mailto:WQX@epa.gov">WQX@epa.gov</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">TADA_FlagCoordinates</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  clean_outsideUSA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"no"</span>, <span class="st">"remove"</span>, <span class="st">"change sign"</span><span class="op">)</span>,</span>
<span>  clean_imprecise <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flaggedonly <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>TADA dataframe</p></dd>


<dt id="arg-clean-outsideusa">clean_outsideUSA<a class="anchor" aria-label="anchor" href="#arg-clean-outsideusa"></a></dt>
<dd><p>Character argument with options "no", "remove", and "change sign";
flags coordinates as outside the USA when clean_outsideUSA = "no";
removes data with coordinates outside of the United States when clean_outsideUSA = "remove";
changes sign of lat/long coordinates flagged as outside the USA when
clean_outside = "change sign"; Default is clean_outsideUSA = "no".</p></dd>


<dt id="arg-clean-imprecise">clean_imprecise<a class="anchor" aria-label="anchor" href="#arg-clean-imprecise"></a></dt>
<dd><p>Boolean argument; removes imprecise data when
clean_imprecise = TRUE. Default is clean_imprecise = FALSE.</p></dd>


<dt id="arg-flaggedonly">flaggedonly<a class="anchor" aria-label="anchor" href="#arg-flaggedonly"></a></dt>
<dd><p>Boolean argument; Return only flagged data when flaggedonly = TRUE;
default is flaggedonly = FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns input TADA dataset with the added "TADA.InvalidCoordinates.Flag" column.
When clean_outsideUSA is "no", "change sign", or clean_imprecise argument is FALSE,
a column flagging rows with the respective QA check is appended to the input
dataframe. When clean_outsideUSA is "remove" or clean_imprecise is TRUE,
"invalid" or "imprecise" data is removed, respectively. When flaggedonly is TRUE,
the dataframe will be filtered to show only the data flagged as invalid, imprecise,
or out of the United States. Defaults are clean_outsideUSA = "no",
clean_imprecise = FALSE, and flaggedonly = FALSE.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load example dataset:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Data_Nutrients_UT</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Flag, but do not remove, data with invalid coordinates in new column</span></span></span>
<span class="r-in"><span><span class="co"># titled "TADA.InvalidCoordinates.Flag":</span></span></span>
<span class="r-in"><span><span class="co"># Return ALL data:</span></span></span>
<span class="r-in"><span><span class="va">InvalidCoord_flags</span> <span class="op">&lt;-</span> <span class="fu">TADA_FlagCoordinates</span><span class="op">(</span><span class="va">Data_Nutrients_UT</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Flag, but do not remove, data with invalid coordinates in new column</span></span></span>
<span class="r-in"><span><span class="co"># titled "TADA.InvalidCoordinates.Flag"</span></span></span>
<span class="r-in"><span><span class="co"># Return ONLY the flagged data:</span></span></span>
<span class="r-in"><span><span class="va">InvalidCoord_flags_flaggedonly</span> <span class="op">&lt;-</span> <span class="fu">TADA_FlagCoordinates</span><span class="op">(</span><span class="va">Data_Nutrients_UT</span>, flaggedonly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove data with coordinates outside the USA, but keep flagged data with</span></span></span>
<span class="r-in"><span><span class="co"># imprecise coordinates:</span></span></span>
<span class="r-in"><span><span class="va">OutsideUSACoord_removed</span> <span class="op">&lt;-</span> <span class="fu">TADA_FlagCoordinates</span><span class="op">(</span><span class="va">Data_Nutrients_UT</span>, clean_outsideUSA <span class="op">=</span> <span class="st">"remove"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Change the sign of coordinates flagged as outside the USA and keep all</span></span></span>
<span class="r-in"><span><span class="co"># flagged data:</span></span></span>
<span class="r-in"><span><span class="va">OutsideUSACoord_changed</span> <span class="op">&lt;-</span> <span class="fu">TADA_FlagCoordinates</span><span class="op">(</span><span class="va">Data_Nutrients_UT</span>, clean_outsideUSA <span class="op">=</span> <span class="st">"change sign"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "When clean_outsideUSA == change sign, the sign for any lat/long coordinates flagged as outside of USA are switched. This is a temporary solution. Data owners should fix the raw data to address invalid coordinates through WQX. For assistance fixing data errors you see in the WQP, email the WQX helpdesk (WQX@epa.gov)."</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove data with imprecise coordinates, but keep flagged data with coordinates outside the USA;</span></span></span>
<span class="r-in"><span><span class="co"># imprecise data may have less than 3 significant figures to the right</span></span></span>
<span class="r-in"><span><span class="co"># of the decimal point:</span></span></span>
<span class="r-in"><span><span class="va">ImpreciseCoord_removed</span> <span class="op">&lt;-</span> <span class="fu">TADA_FlagCoordinates</span><span class="op">(</span><span class="va">Data_Nutrients_UT</span>, clean_imprecise <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "All invalid coordinates were removed. Returning input dataframe with TADA.InvalidCoordinates.Flag column for tracking."</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove data with imprecise coordinates or coordinates outside the USA from the dataframe:</span></span></span>
<span class="r-in"><span><span class="va">InvalidCoord_removed</span> <span class="op">&lt;-</span> <span class="fu">TADA_FlagCoordinates</span><span class="op">(</span><span class="va">Data_Nutrients_UT</span>, clean_outsideUSA <span class="op">=</span> <span class="st">"remove"</span>, clean_imprecise <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "All invalid coordinates were removed. Returning input dataframe with TADA.InvalidCoordinates.Flag column for tracking."</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by U.S. Environmental Protection Agency, Cristina Mullin, Jacob Greif, Hillary Marler, Elise Hinman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

