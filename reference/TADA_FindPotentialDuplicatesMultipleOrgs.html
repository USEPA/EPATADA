<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Identifies data records uploaded by different organizations with the same date,
time, characteristic name, and result value within X meters of each other and
flags as potential duplicates. However, it is at the discretion of the data user
to determine if the data records are unique or represent overlap that could cause
issues in the data analysis."><title>Identify Potentially Duplicated Data Uploads by Multiple Organizations — TADA_FindPotentialDuplicatesMultipleOrgs • TADA</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Identify Potentially Duplicated Data Uploads by Multiple Organizations — TADA_FindPotentialDuplicatesMultipleOrgs"><meta property="og:description" content="Identifies data records uploaded by different organizations with the same date,
time, characteristic name, and result value within X meters of each other and
flags as potential duplicates. However, it is at the discretion of the data user
to determine if the data records are unique or represent overlap that could cause
issues in the data analysis."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">TADA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/CONTRIBUTING.html">Contributing</a>
    <a class="dropdown-item" href="../articles/TADAModule1.html">TADA Module 1: Water Quality Portal Data Discovery and Cleaning</a>
    <a class="dropdown-item" href="../articles/TADAR5.html">TADA Package Training: A Markdown For Region 5 R Users Network</a>
    <a class="dropdown-item" href="../articles/TADATrainingShepherdstown.html">TADA R Package Training: A Markdown for Shepherdstown</a>
    <a class="dropdown-item" href="../articles/WQXValidationService.html">WQX QAQC Service User Guide</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USEPA/TADA/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Identify Potentially Duplicated Data Uploads by Multiple Organizations</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/TADA/blob/HEAD/R/ResultFlagsIndependent.R" class="external-link"><code>R/ResultFlagsIndependent.R</code></a></small>
      <div class="d-none name"><code>TADA_FindPotentialDuplicatesMultipleOrgs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Identifies data records uploaded by different organizations with the same date,
time, characteristic name, and result value within X meters of each other and
flags as potential duplicates. However, it is at the discretion of the data user
to determine if the data records are unique or represent overlap that could cause
issues in the data analysis.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">TADA_FindPotentialDuplicatesMultipleOrgs</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  dist_buffer <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  org_hierarchy <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>.data</dt>
<dd><p>TADA dataframe</p></dd>


<dt>dist_buffer</dt>
<dd><p>Numeric. The distance in meters below which two sites with
measurements at the same time on the same day of the same parameter will
be flagged as potential duplicates.</p></dd>


<dt>org_hierarchy</dt>
<dd><p>Vector of organization identifiers that acts as the
order in which the function should select a result as the representative
duplicate, based on the organization that collected the data. If left
blank, the function chooses the representative duplicate result at random.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The same input TADA dataframe with additional columns: a
TADA.MultipleOrgDuplicate column indicating if there is evidence that
results are likely duplicated due to submission of the same dataset by two
or more different organizations, a TADA.MultipleOrgDupGroupID column
containing a number unique to results that may represent duplicated
measurement events, a TADA.ResultSelectedMultipleOrgs column indicating
which rows are selected to keep (Y) and remove (N) based on the
org hierarchy, and a TADA.NearbySiteGroups column indicating which
monitoring locations are within the distance buffer from each other.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function runs TADA_FindNearbySites within it which adds the
TADA.NearbySiteGroups field. Duplicates are only flagged as duplicates if
the distance between sites is less than the function input dist_buffer
(default is 100m). Each group in the TADA.NearbySiteGroups field indicates
that the sites within each group are within the specified distance from each other.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load dataset</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="TADA_DataRetrieval.html">TADA_DataRetrieval</a></span><span class="op">(</span>startDate <span class="op">=</span> <span class="st">"2022-09-01"</span>, endDate <span class="op">=</span> <span class="st">"2023-05-01"</span>, statecode <span class="op">=</span> <span class="st">"PA"</span>, sampleMedia <span class="op">=</span> <span class="st">"Water"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Downloading WQP query results. This may take some time depending upon the query size."</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> NEWS: USGS data availability and format are changing. </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Beginning in mid-March 2024 the data obtained from legacy profiles</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> will not include new USGS data or recent updates to existing data. </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> To view the status of changes in data availability and code functionality, visit:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> https://doi-usgs.github.io/dataRetrieval/articles/Status.html</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> If you have additional questions about these changes, </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> email CompTools@usgs.gov.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> NEWS: USGS data availability and format are changing. </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Beginning in mid-March 2024 the data obtained from legacy profiles</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> will not include new USGS data or recent updates to existing data. </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> To view the status of changes in data availability and code functionality, visit:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> https://doi-usgs.github.io/dataRetrieval/articles/Status.html</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> If you have additional questions about these changes, </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> email CompTools@usgs.gov.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Data successfully downloaded. Running TADA_AutoClean function."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_Autoclean: creating TADA-specific columns."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_Autoclean: checking for special characters."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_Autoclean: updating deprecated (i.e. retired) characteristic names."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1704 results in your dataset have one of the following deprecated characteristic names: 2-Propen-1-ol; Inorganic nitrogen (nitrate and nitrite); Phosphate-phosphorus. These names have been substituted with the updated preferred names in the TADA.CharacteristicName field."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_Autoclean: harmonizing result and depth units."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NOTE: This version of the TADA package is designed to work with quantitative (numeric) data with media name: 'WATER'. TADA_AutoClean does not currently remove (filter) data with non-water media types. If desired, the user must make this specification on their own outside of package functions. Example: dplyr::filter(.data, TADA.ActivityMediaName == 'WATER')"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">OrganizationIdentifier</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "USGS-PA"             "11NPSWRD_WQX"        "ADVENTURESCIENTISTS"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4] "WVDEP_WQX"           "DRBC"                "31ORWUNT_WQX"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7] "21PA_WQX"            "31DELRBC_WQX"        "EPA_GLNPO"          </span>
<span class="r-in"><span><span class="co"># If duplicates across organizations exist, pick the result belonging to "21PA_WQX" if available.</span></span></span>
<span class="r-in"><span><span class="va">dat1</span> <span class="op">&lt;-</span> <span class="fu">TADA_FindPotentialDuplicatesMultipleOrgs</span><span class="op">(</span><span class="va">dat</span>, dist_buffer <span class="op">=</span> <span class="fl">100</span>, org_hierarchy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"21PA_WQX"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(OrganizationIdentifier)`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1207 potentially duplicated results found in dataset. These have been placed into duplicate groups in the TADA.MultipleOrgDupGroupID column and the TADA.MultipleOrgDuplicate column is set to 'Y' (yes). If you provided an organization hierarchy, the result with the lowest ranked organization identifier was selected as the representative result in the TADA.ResultSelectedMultipleOrgs (this column is set to 'Y' for all results either selected or not considered duplicates)."</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">dat1</span><span class="op">$</span><span class="va">TADA.ResultSelectedMultipleOrgs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     N     Y </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   615 73554 </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by U.S. Environmental Protection Agency, Cristina Mullin, Jacob Greif, Elise Hinman, Hillary Marler, Kathleen Healy, Justin Bousquin, Renae Myers.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

