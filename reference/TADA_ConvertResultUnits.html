<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='This function converts result and detection limit measure values and units in the
input dataframe to TADA target units. It also automatically wrangles common
USGS units which include speciation in the unit value, such as "mg/l as N"
and "mg/l asNO3", by transferring the speciation information to the
TADA.MethodSpeciationName field. No speciation conversions occur in this
function.'><title>Transform Units to TADA Target Units, WQX Target Units or User Specified Units — TADA_ConvertResultUnits • EPATADA</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Transform Units to TADA Target Units, WQX Target Units or User Specified Units — TADA_ConvertResultUnits"><meta property="og:description" content='This function converts result and detection limit measure values and units in the
input dataframe to TADA target units. It also automatically wrangles common
USGS units which include speciation in the unit value, such as "mg/l as N"
and "mg/l asNO3", by transferring the speciation information to the
TADA.MethodSpeciationName field. No speciation conversions occur in this
function.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">EPATADA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/CONTRIBUTING.html">Contributing</a>
    <a class="dropdown-item" href="../articles/TADAAssessmentUnitUseCase.html">TADA: Assessment Unit Use Case Demo</a>
    <a class="dropdown-item" href="../articles/TADAModule1_AdvancedTraining.html">TADA Module 1: Training for Intermediate/Advanced R Users</a>
    <a class="dropdown-item" href="../articles/TADAModule1_BeginnerTraining.html">TADA Module 1: Training for Beginner R Users</a>
    <a class="dropdown-item" href="../articles/TADAModule1.html">TADA Module 1: Water Quality Portal Data Discovery and Cleaning</a>
    <a class="dropdown-item" href="../articles/TADAModule2.html">TADA Module 2: Geospatial Functions</a>
    <a class="dropdown-item" href="../articles/TADAWaterSciConWorkshopDemo.html">TADA: WaterSciCon Workshop Demo</a>
    <a class="dropdown-item" href="../articles/WQXValidationService.html">WQX QAQC Service User Guide</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USEPA/EPATADA/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Transform Units to TADA Target Units, WQX Target Units or User Specified Units</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EPATADA/blob/HEAD/R/UnitConversions.R" class="external-link"><code>R/UnitConversions.R</code></a></small>
      <div class="d-none name"><code>TADA_ConvertResultUnits.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function converts result and detection limit measure values and units in the
input dataframe to TADA target units. It also automatically wrangles common
USGS units which include speciation in the unit value, such as "mg/l as N"
and "mg/l asNO3", by transferring the speciation information to the
TADA.MethodSpeciationName field. No speciation conversions occur in this
function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">TADA_ConvertResultUnits</span><span class="op">(</span><span class="va">.data</span>, ref <span class="op">=</span> <span class="st">"tada"</span>, transform <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>.data</dt>
<dd><p>TADA dataframe</p></dd>


<dt>ref</dt>
<dd><p>Optional character argument in which a user can specify a data frame
by name. Data frame must contain the columns CharacteristicName, Unit, and TargetUnit.
TADA_CreateUnitRef() can be used to help create this data frame. There are two
options that do not require the user to supply a data frame, "tada" and "wqx".
When ref = "wqx" all unit conversion will be based on the WQX unit reference
which applies targets at the unit level.
When ref = "tada" all unit conversion will be based on TADA priority characteristic
units (where applicable) which applies targets at the characteristic level,
with any other units assigned by WQX unit reference (at the unit level).
The default is ref = "tada".</p></dd>


<dt>transform</dt>
<dd><p>Boolean argument with two possible values, “TRUE” and “FALSE”.
Default is transform = TRUE. When transform = TRUE, result values and units,
and detection quantitation limit value and units are converted to TADA target units.
This function changes the values within "TADA.ResultMeasure.MeasureUnitCode" and
"TADA.DetectionQuantitationLimitMeasure.MeasureValue" to the TADA target units
and converts  respective values within the "TADA.ResultMeasureValue" and
"TADA.DetectionQuantitationLimitMeasure.MeasureValue" fields. When
"TADA.ResultMeasure.MeasureUnitCode" is NA, the unit is taken from
"TADA.DetectionQuantitationLimitMeasure.MeasureUnitCode" if it not NA. This
facilitates estimation of censored data later in the workflow.</p>
<p>When transform = FALSE, result values and units, and detection quantitation limit
values are units are NOT converted to TADA target units,but columns are appended
to indicate what the target units and conversion factors are, and if the data can
be converted. This function adds the following four fields ONLY when transform =
FALSE: "TADA.WQXUnitConversionFactor", "TADA.WQXTargetUnit",
"TADA.SpeciationUnitConversion", and "TADA.WQXResultUnitConversion.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A TADA dataframe. Depending on the arguments entered by the user, the
number of columns returned may differ. When transform = TRUE, TADA.ResultMeasureValue
and TADA.ResultMeasure.MeasureUnitCode are converted to target units. When transform =
FALSE, "TADA.WQXUnitConversionFactor", "TADA.WQXTargetUnit",
"TADA.SpeciationUnitConversion" are added. With either transform argument,
"TADA.WQXResultUnitCoversion" is added. It indicates if data can be converted.
"NoResultValue" means data cannot be converted because there is no
ResultMeasureValue, and "NoTargetUnit"means data cannot be converted because
the original unit is not associated with a target unit. "Convert" means the data
can be transformed.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function uses the "TADA.ResultMeasureValue"
and TADA.ResultMeasure.MeasureUnitCode" fields from an autocleaned input
dataframe to perform conversions when transform = TRUE.</p>
<p>Speciation in USGS result units
(ex: "mg/L as N") are addressed in this function by creating additional rows to
accommodate all possible combinations from the input TADA dataframe, including
those with speciation in units.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load example dataset:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Data_Nutrients_UT</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Do not convert result values and units, but add four new columns titled</span></span></span>
<span class="r-in"><span><span class="co"># "TADA.WQXUnitConversionFactor", "TADA.WQXUnitConversionCoefficient", "TADA.WQXTargetUnit", and "TADA.SpeciationUnitConversion":</span></span></span>
<span class="r-in"><span><span class="va">ResultUnitsNotConverted</span> <span class="op">&lt;-</span> <span class="fu">TADA_ConvertResultUnits</span><span class="op">(</span><span class="va">Data_Nutrients_UT</span>, transform <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_ConvertResultUnits: TADA target units are assigned by default when no unit 'ref' is supplied as a function input."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_ConvertResultUnits: When Transform = FALSE, result values and units are NOT converted. Conversions are required for many other TADA functions to work properly (such as result value range checks)."</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert values and units for results and detection limits:</span></span></span>
<span class="r-in"><span><span class="va">ResultUnitsConverted</span> <span class="op">&lt;-</span> <span class="fu">TADA_ConvertResultUnits</span><span class="op">(</span><span class="va">Data_Nutrients_UT</span>, transform <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_ConvertResultUnits: TADA target units are assigned by default when no unit 'ref' is supplied as a function input."</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by U.S. Environmental Protection Agency, Cristina Mullin, Jacob Greif, Hillary Marler, Elise Hinman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

