<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create or Update ATTAINS Parameter and Use crosswalk — TADA_CreateParamUseRef • EPATADA</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create or Update ATTAINS Parameter and Use crosswalk — TADA_CreateParamUseRef"><meta name="description" content="This function generates a crosswalk of all parameters and uses applicable
to the selected organization(s) in ATTAINS. Users should review and validate
each ATTAINS.ParameterName and associated use_name combination.
As part of this review process, users should check to make sure each
'use_name' from the drop-down menu in the excel spreadsheet generated by this
function also accurately corresponds to the correct TADA.ComparableDataIdentifier
and ATTAINS.ParameterName found in the TADA dataframe. This function should be
run after creating a parameter (ATTAINS.ParameterName and
TADA.ComparableDataIdentifier) crosswalk."><meta property="og:description" content="This function generates a crosswalk of all parameters and uses applicable
to the selected organization(s) in ATTAINS. Users should review and validate
each ATTAINS.ParameterName and associated use_name combination.
As part of this review process, users should check to make sure each
'use_name' from the drop-down menu in the excel spreadsheet generated by this
function also accurately corresponds to the correct TADA.ComparableDataIdentifier
and ATTAINS.ParameterName found in the TADA dataframe. This function should be
run after creating a parameter (ATTAINS.ParameterName and
TADA.ComparableDataIdentifier) crosswalk."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EPATADA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/CONTRIBUTING.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../articles/TADAAssessmentUnitUseCase.html">TADA: Assessment Unit Use Case Demo</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_AdvancedTraining.html">TADA Module 1: Training for Intermediate/Advanced R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_BeginnerTraining.html">TADA Module 1: Training for Beginner R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1.html">TADA Module 1: Water Quality Portal Data Discovery and Cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule2.html">TADA Module 2: Geospatial Functions</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule3_PartA.html">TADA Module 3: Associating WQP Characteristics with Applicable ATTAINS and EPA 304(a) Parameters and Uses</a></li>
    <li><a class="dropdown-item" href="../articles/TADAWaterSciConWorkshopDemo.html">TADA: WaterSciCon Workshop Demo</a></li>
    <li><a class="dropdown-item" href="../articles/WQXValidationService.html">WQX QAQC Service User Guide</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USEPA/EPATADA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create or Update ATTAINS Parameter and Use crosswalk</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EPATADA/blob/develop/R/ATTAINSCrosswalks.R" class="external-link"><code>R/ATTAINSCrosswalks.R</code></a></small>
      <div class="d-none name"><code>TADA_CreateParamUseRef.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function generates a crosswalk of all parameters and uses applicable
to the selected organization(s) in ATTAINS. Users should review and validate
each ATTAINS.ParameterName and associated use_name combination.
As part of this review process, users should check to make sure each
'use_name' from the drop-down menu in the excel spreadsheet generated by this
function also accurately corresponds to the correct TADA.ComparableDataIdentifier
and ATTAINS.ParameterName found in the TADA dataframe. This function should be
run after creating a parameter (ATTAINS.ParameterName and
TADA.ComparableDataIdentifier) crosswalk.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">TADA_CreateParamUseRef</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  org_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  paramRef <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  paramUseRef <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  excel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>A TADA dataframe. The user should run all desired data cleaning,
processing, harmonization, filtering, and handling of censored data functions
prior to running TADA_CreateParamRef.</p></dd>


<dt id="arg-org-id">org_id<a class="anchor" aria-label="anchor" href="#arg-org-id"></a></dt>
<dd><p>The ATTAINS organization identifier must be supplied by the
user. A list of organization identifiers can be found by downloading
the ATTAINS Domains Excel file:
https://www.epa.gov/system/files/other-files/2023-09/DOMAINS.xlsx.
organization identifiers are listed in the "OrgName" tab.
The "code" column contains the organization identifiers that
should be used for this param. If a user does not provide an org_id argument,
the function attempts to identify which organization identifier(s) to include
based on the unique ATTAINS organization identifiers found in the dataframe.</p></dd>


<dt id="arg-paramref">paramRef<a class="anchor" aria-label="anchor" href="#arg-paramref"></a></dt>
<dd><p>A dataframe which contains a completed crosswalk between
TADA_ComparableDataIdentifier and ATTAINS.ParameterName. Users will need to
ensure this crosswalk contains the appropriate column names in order to
run the function. paramRef must contain at least these two column names:
TADA.ComparableDataIdentifier and ATTAINS.ParameterName. Users who are
interested in performing analyses for more than
one organization (multiple states or tribes, or a single state/tribe and
EPA 304a criteria) also need to include an additional column name:
'organization_identifier'.</p></dd>


<dt id="arg-paramuseref">paramUseRef<a class="anchor" aria-label="anchor" href="#arg-paramuseref"></a></dt>
<dd><p>A dataframe which contains a completed crosswalk of
organization specific use_name(s) for each ATTAINS.ParameterName.
Users will need to ensure this crosswalk contains the appropriate column
names in order to  run the function. Users who have previously completed
this crosswalk table can re-use it and review this output for accuracy.</p></dd>


<dt id="arg-excel">excel<a class="anchor" aria-label="anchor" href="#arg-excel"></a></dt>
<dd><p>A Boolean value that returns an excel spreadsheet if
excel = TRUE. This spreadsheet is created in the user's downloads folder path.
If you have any trouble locating the file, please type the following into
your R console to locate it: file.path(Sys.getenv("USERPROFILE"), "Downloads").
The file will be named "myfileRef.xlsx". The excel spreadsheet will highlight
the cells in which users should input information. Users may need to insert
additional rows if:</p><ol><li><p>ATTAINS.ParameterName(s) correspond with multiple TADA.ComparableDataIdentifier(s)
Example: An org uses "ALUMINUM" for all aluminum related parameter causes,
but this ATTAINS.parameter name may crosswalk to "ALUMINUM_TOTAL_NA_UG/L"
for one designated use and "ALUMINUM_DISSOLVED_NA_UG/L" for another; or</p></li>
<li><p>TADA.ComparableDataIdentifier(s) are matched with multiple
ATTAINS.ParameterNames. Example: An org uses both "pH, HIGH" and "pH, LOW"
as ATTAINS.ParameterNames, both crosswalk to the
TADA.ComparableDataIdentifier "PH_NA_NA_STD UNITS".</p></li>
</ol></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>A Boolean value that ensures the function will not overwrite
the user supplied crosswalk entered into this function via the paramRef
function input. This helps prevent users from overwriting their progress.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A dataframe which contains the columns: TADA.ComparableDataIdentifier,
organization_identifier, EPA304A.PollutantName, ATTAINS.ParameterName,
and ATTAINS.FlagUseName. Users will need to review the crosswalk between
ATTAINS.ParameterName, use_name and TADA.ComparableDataIdentifier.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Before running this function, users must run TADA_CreateParamRef() to
create the crosswalk that defines the ATTAINS.ParameterName(s) and
use_name(s) needing validation. All unique use_names from prior ATTAINS
assessment cycles are pulled in using TADA_CreateParamUseRef(). If a user has
defined multiple TADA.ComparableDataIdentifier matches to an
ATTAINS.ParameterName, they will need to define whether every
TADA.ComparableDataIdentifier matches to an associated use_name.
If certain parameter and use combinations only apply to certain
TADA.ComparableDataIdentifier(s), users will need to select 'NA' or leave it
as blank to properly capture this logic.</p>
<p>If an ATTAINS use name is not listed as a prior domain value for your organization
from prior ATTAINS assessment cycles, users can contact the ATTAINS helpdesk
<a href="mailto:attains@epa.gov">attains@epa.gov</a> to inquire about adding the use to the ATTAINS
domain list. Otherwise, users can still
proceed by overriding the data validation by value pasting in Excel.
Users will be warned in the ATTAINS.FlagUseName column if they choose to
include an ATTAINS use name that was not listed in prior ATTAINS assessment cycles as:
'Use name is not listed as a prior cause in ATTAINS for this organization' or
'Use name is listed as a prior cause in this organization, but not for this parameter name'.</p>
<p>Users will have the flexibility to include the EPA304a criteria by including
the string 'EPA304a' in the org_id function argument.Users who only want to
review data against the EPA304a criteria can enter: org_id = "EPA304a".</p>
<p>Users who want both their organization and and the EPA304a criteria
can input a vector such as: org_id = c("EPA304a", "UTAHDWQ").</p>
<p>NOTE: The EPA304a criteria are not a part of ATTAINS. This information is
brought in from EPA's Criteria Search Tool (CST):
www.epa.gov/wqs-tech/state-specific-water-quality-standards-effective-under-clean-water-act-cwa.
The TADA Team has crosswalked the CST pollutant names with
TADA.ComparableDataIdentifier(s) to make the criteria values available for
use within TADA functions. The use_name(s) associated with the EPA304a
criteria are included from the CST. All other use_name(s) are specific to an
ATTAINS organization and come from the ATTAINS domain value for use_name.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="TADA_CreateParamRef.html">TADA_CreateParamRef()</a></code></p>
<p><code><a href="TADA_GetEPACSTRef.html">TADA_GetEPACSTRef()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># First, generate and fill out a parameter crosswalk (see TADA_CreateParamRef()):</span></span></span>
<span class="r-in"><span><span class="va">paramRef_UT</span> <span class="op">&lt;-</span> <span class="fu"><a href="TADA_CreateParamRef.html">TADA_CreateParamRef</a></span><span class="op">(</span><span class="va">Data_Nutrients_UT</span>, org_id <span class="op">=</span> <span class="st">"UTAHDWQ"</span>, excel <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">paramRef_UT2</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">paramRef_UT</span>, ATTAINS.ParameterName <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">TADA.CharacteristicName</span> <span class="op">==</span> <span class="st">"AMMONIA"</span> <span class="op">~</span> <span class="st">"AMMONIA, TOTAL"</span>,</span></span>
<span class="r-in"><span>  <span class="va">TADA.CharacteristicName</span> <span class="op">==</span> <span class="st">"NITRATE"</span> <span class="op">~</span> <span class="st">"NITRATE"</span>,</span></span>
<span class="r-in"><span>  <span class="va">TADA.CharacteristicName</span> <span class="op">==</span> <span class="st">"NITROGEN"</span> <span class="op">~</span> <span class="st">"NITRATE/NITRITE (NITRITE + NITRATE AS N)"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">paramRef_UT3</span> <span class="op">&lt;-</span> <span class="fu"><a href="TADA_CreateParamRef.html">TADA_CreateParamRef</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">Data_Nutrients_UT</span>,</span></span>
<span class="r-in"><span>  paramRef <span class="op">=</span> <span class="va">paramRef_UT2</span>, org_id <span class="op">=</span> <span class="st">"UTAHDWQ"</span>, excel <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Next, enter the crosswalk generated above as the paramRef function input</span></span></span>
<span class="r-in"><span><span class="co"># for TADA_CreateParamUseRef():</span></span></span>
<span class="r-in"><span><span class="va">paramUseRef_UT</span> <span class="op">&lt;-</span> <span class="fu">TADA_CreateParamUseRef</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">Data_Nutrients_UT</span>,</span></span>
<span class="r-in"><span>  paramRef <span class="op">=</span> <span class="va">paramRef_UT3</span>, org_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"UTAHDWQ"</span><span class="op">)</span>, excel <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Users can include the EPA304a criteria by itself or in addition to their org(s)</span></span></span>
<span class="r-in"><span><span class="va">paramUseRef_UT2</span> <span class="op">&lt;-</span> <span class="fu">TADA_CreateParamUseRef</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">Data_Nutrients_UT</span>,</span></span>
<span class="r-in"><span>  paramRef <span class="op">=</span> <span class="va">paramRef_UT3</span>,</span></span>
<span class="r-in"><span>  org_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EPA304a"</span>, <span class="st">"UTAHDWQ"</span><span class="op">)</span>, excel <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">paramUseRef_UT3</span> <span class="op">&lt;-</span> <span class="fu">TADA_CreateParamUseRef</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">Data_Nutrients_UT</span>,</span></span>
<span class="r-in"><span>  paramRef <span class="op">=</span> <span class="va">paramRef_UT3</span>,</span></span>
<span class="r-in"><span>  org_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EPA304a"</span><span class="op">)</span>, excel <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by U.S. Environmental Protection Agency, Cristina Mullin, Hillary Marler, Jacob Greif, Elise Hinman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

