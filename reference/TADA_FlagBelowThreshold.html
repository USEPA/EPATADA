<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Check Result Value Against WQX Lower Threshold — TADA_FlagBelowThreshold • EPATADA</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Check Result Value Against WQX Lower Threshold — TADA_FlagBelowThreshold"><meta name="description" content="EPA's Water Quality Exchange (WQX) has generated maximum and minimum thresholds
for each parameter and unit combination from millions of water quality data
points around the country. This function leverages the WQX QAQC Validation Table
to flag any data that is below the lower threshold of result values submitted
to WQX for a given characteristic."><meta property="og:description" content="EPA's Water Quality Exchange (WQX) has generated maximum and minimum thresholds
for each parameter and unit combination from millions of water quality data
points around the country. This function leverages the WQX QAQC Validation Table
to flag any data that is below the lower threshold of result values submitted
to WQX for a given characteristic."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EPATADA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/CONTRIBUTING.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../articles/TADAAssessmentUnitUseCase.html">TADA: Assessment Unit Use Case Demo</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_AdvancedTraining.html">TADA Module 1: Training for Intermediate/Advanced R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_BeginnerTraining.html">TADA Module 1: Training for Beginner R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1.html">TADA Module 1: Water Quality Portal Data Discovery and Cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule2.html">TADA Module 2: Geospatial Functions</a></li>
    <li><a class="dropdown-item" href="../articles/TADAWaterSciConWorkshopDemo.html">TADA: WaterSciCon Workshop Demo</a></li>
    <li><a class="dropdown-item" href="../articles/WQXValidationService.html">WQX QAQC Service User Guide</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USEPA/EPATADA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Check Result Value Against WQX Lower Threshold</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EPATADA/blob/develop/R/ResultFlagsIndependent.R" class="external-link"><code>R/ResultFlagsIndependent.R</code></a></small>
      <div class="d-none name"><code>TADA_FlagBelowThreshold.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>EPA's Water Quality Exchange (WQX) has generated maximum and minimum thresholds
for each parameter and unit combination from millions of water quality data
points around the country. This function leverages the WQX QAQC Validation Table
to flag any data that is below the lower threshold of result values submitted
to WQX for a given characteristic.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">TADA_FlagBelowThreshold</span><span class="op">(</span><span class="va">.data</span>, clean <span class="op">=</span> <span class="cn">FALSE</span>, flaggedonly <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>TADA dataframe</p></dd>


<dt id="arg-clean">clean<a class="anchor" aria-label="anchor" href="#arg-clean"></a></dt>
<dd><p>Boolean argument; removes data that is below the lower WQX
threshold from the dataframe when clean = TRUE. Default is clean = FALSE.</p></dd>


<dt id="arg-flaggedonly">flaggedonly<a class="anchor" aria-label="anchor" href="#arg-flaggedonly"></a></dt>
<dd><p>Boolean argument; filters dataframe to show only the data
flagged as below the lower WQX threshold. Default is flaggedonly = FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The input TADA dataset with the added "TADA.ResultValueBelowLowerThreshold.Flag"
column which is populated with the values: "Pass", "Suspect", "Not Reviewed", or
"NA - Not Available". Defaults are clean = FALSE and flaggedonly = FALSE.
When clean = FALSE and flaggedonly = TRUE, the dataframe
is filtered to show only data found below the WQX threshold. When clean = TRUE
and flaggedonly = FALSE, rows with values that are below the lower WQX threshold
are removed from the dataframe. When clean = TRUE and and flaggedonly = TRUE,
the function is not executed and an error message is returned.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When clean = FALSE and flaggedonly = FALSE, a column which flags data below
the lower WQX threshold is appended to the dataframe. When clean = FALSE and
flaggedonly = TRUE, the dataframe is filtered to show only data found below
the WQX threshold. When clean = TRUE and flaggedonly = FALSE, rows with values
that are below the upper WQX threshold are removed from the dataframe and no
column is appended. When clean = TRUE and and flaggedonly = TRUE, the function
is not executed and an error message is returned. Defaults are clean = FALSE
and flaggedonly = FALSE.</p>
<p>This function will add the column "TADA.ResultValueBelowLowerThreshold.Flag" which
will be populated with the values: "Pass", "Suspect", "Not Reviewed", or
"NA - Not Available". The “Not Reviewed” value means that the EPA WQX team
has not yet reviewed the range yet for the characteristic and unit combination combination
in that row (see https://cdx.epa.gov/wqx/download/DomainValues/QAQCCharacteristicValidation.CSV).
The WQX team plans to review and update these new combinations quarterly. The
"NA - Not Available" flag means that the characteristic, media, and/or unit combination
for that row is not fully populated (is NA or does not match the WQX data standard)
or the result value is NA.</p>
<p>If this function is run more than once on the same dataframe,
the flag column will be deleted and regenerated.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load example dataset:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Data_Nutrients_UT</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove data that is below the lower WQX threshold from the dataframe:</span></span></span>
<span class="r-in"><span><span class="va">WQXLowerThreshold_clean</span> <span class="op">&lt;-</span> <span class="fu">TADA_FlagBelowThreshold</span><span class="op">(</span><span class="va">Data_Nutrients_UT</span>, clean <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "No data below the WQX Lower Threshold were found in your dataframe. Returning the input dataframe with TADA.ResultValueBelowLowerThreshold.Flag column for tracking."</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Flag, but do not remove, data that is below the lower WQX threshold in</span></span></span>
<span class="r-in"><span><span class="co"># new column titled "TADA.ResultValueBelowLowerThreshold.Flag":</span></span></span>
<span class="r-in"><span><span class="va">WQXLowerThreshold_flags</span> <span class="op">&lt;-</span> <span class="fu">TADA_FlagBelowThreshold</span><span class="op">(</span><span class="va">Data_Nutrients_UT</span>, clean <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "No data below the WQX Lower Threshold were found in your dataframe. Returning the input dataframe with TADA.ResultValueBelowLowerThreshold.Flag column for tracking."</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show only data that is below the lower WQX threshold:</span></span></span>
<span class="r-in"><span><span class="va">WQXLowerThreshold_flagsonly</span> <span class="op">&lt;-</span> <span class="fu">TADA_FlagBelowThreshold</span><span class="op">(</span><span class="va">Data_Nutrients_UT</span>, clean <span class="op">=</span> <span class="cn">FALSE</span>, flaggedonly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "This dataframe is empty because no data below the WQX Lower Threshold was found in your dataframe"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by U.S. Environmental Protection Agency, Cristina Mullin, Jacob Greif, Hillary Marler, Elise Hinman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

