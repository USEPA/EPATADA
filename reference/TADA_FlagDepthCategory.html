<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>TADA_FlagDepthCategory — TADA_FlagDepthCategory • EPATADA</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="TADA_FlagDepthCategory — TADA_FlagDepthCategory"><meta name="description" content='This function creates a new column, TADA.DepthCategory.Flag with values: "No
depth info", "Surface", "Bottom", and
"Middle" when multiple depths are available.
Categories are: less than 2m (or user specified value) depth = "Surface", from
bottom up to 2m (or user specified value) from bottom = "Bottom", and all depths
in between the Surface and Bottom are assigned to the "Middle" category.'><meta property="og:description" content='This function creates a new column, TADA.DepthCategory.Flag with values: "No
depth info", "Surface", "Bottom", and
"Middle" when multiple depths are available.
Categories are: less than 2m (or user specified value) depth = "Surface", from
bottom up to 2m (or user specified value) from bottom = "Bottom", and all depths
in between the Surface and Bottom are assigned to the "Middle" category.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EPATADA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/CONTRIBUTING.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../articles/TADAAssessmentUnitUseCase.html">TADA: Assessment Unit Use Case Demo</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_AdvancedTraining.html">TADA Module 1: Training for Intermediate/Advanced R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1_BeginnerTraining.html">TADA Module 1: Training for Beginner R Users</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule1.html">TADA Module 1: Water Quality Portal Data Discovery and Cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/TADAModule2.html">TADA Module 2: Geospatial Functions</a></li>
    <li><a class="dropdown-item" href="../articles/TADAWaterSciConWorkshopDemo.html">TADA: WaterSciCon Workshop Demo</a></li>
    <li><a class="dropdown-item" href="../articles/WQXValidationService.html">WQX QAQC Service User Guide</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USEPA/EPATADA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>TADA_FlagDepthCategory</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EPATADA/blob/develop/R/DepthProfile.R" class="external-link"><code>R/DepthProfile.R</code></a></small>
      <div class="d-none name"><code>TADA_FlagDepthCategory.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates a new column, TADA.DepthCategory.Flag with values: "No
depth info", "Surface", "Bottom", and
"Middle" when multiple depths are available.
Categories are: less than 2m (or user specified value) depth = "Surface", from
bottom up to 2m (or user specified value) from bottom = "Bottom", and all depths
in between the Surface and Bottom are assigned to the "Middle" category.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">TADA_FlagDepthCategory</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  bycategory <span class="op">=</span> <span class="st">"no"</span>,</span>
<span>  bottomvalue <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  surfacevalue <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  dailyagg <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  aggregatedonly <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  clean <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>TADA dataframe</p></dd>


<dt id="arg-bycategory">bycategory<a class="anchor" aria-label="anchor" href="#arg-bycategory"></a></dt>
<dd><p>character argument with options "no", "all", "surface", "middle",
"bottom". The default is bycategory = "no" which means that any aggregate values
are based on the entire water column at a Monitoring Location. When bycategory
= "all", any aggregate values are determined for each depth category for each
Monitoring Location. When bycategory = "surface", "middle", or "bottom", the data
frame is filtered only to include results in the selected category and aggregate
values are determined ONLY for results with TADA.DepthCategory.Flags
"Surface", "Bottom", or "Middle"
results respectively.</p></dd>


<dt id="arg-bottomvalue">bottomvalue<a class="anchor" aria-label="anchor" href="#arg-bottomvalue"></a></dt>
<dd><p>numeric argument. The user enters how many meters from the
bottom should be included in the "Bottom" category. Default is
bottomvalue = 2. If bottomvalue = "null", "Bottom" and "Middle" results cannot
be identified, however TADA.ConsolidatedDepth and TADA.ConsolidatedDepth.Bottom
will still be determined.</p></dd>


<dt id="arg-surfacevalue">surfacevalue<a class="anchor" aria-label="anchor" href="#arg-surfacevalue"></a></dt>
<dd><p>numeric argument. The user enters how many meters from the
surface should be included in the "Surface" category. Default is surfacevalue = 2.
If surfacevalue = "null", "Surface" and "Middle" results cannot
be identified, however TADA.ConsolidatedDepth and TADA.ConsolidatedDepth.Bottom
will still be determined.</p></dd>


<dt id="arg-dailyagg">dailyagg<a class="anchor" aria-label="anchor" href="#arg-dailyagg"></a></dt>
<dd><p>Character argument; with options "none", "avg", "min", or
"max". The default is dailyagg = "none". When dailyagg = "none", all results
will be retained. When dailyagg == "avg", the mean value in each group of
results (as determined by the depth category) will be identified or calculated for each
MonitoringLocation, ActivityDate, Organization ID, and TADA.CharacteristicName combination.
When dailyagg == "min" or when dailyagg == "max", the min or max
value in each group of results (as determined by the depth category) will
be identified or calculated for each MonitoringLocation, ActivityDate, and TADA.CharacteristicName
combination. An additional column, TADA.DepthProfileAggregation.Flag will be added
to describe aggregation.</p></dd>


<dt id="arg-aggregatedonly">aggregatedonly<a class="anchor" aria-label="anchor" href="#arg-aggregatedonly"></a></dt>
<dd><p>Boolean argument with options "TRUE" or "FALSE". The
default is aggregatedonly = "FALSE" which means that all results are returned.
When aggregatedonly = "TRUE", only aggregate values are returned.</p></dd>


<dt id="arg-clean">clean<a class="anchor" aria-label="anchor" href="#arg-clean"></a></dt>
<dd><p>Boolean argument with options "TRUE" or "FALSE". The
default is clean = "FALSE" which means that all results are returned.
When clean = "TRUE", only aggregate results which can be assigned to a depth
category are included in the returned dataframe.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The same input TADA dataframe with additional columns TADA.DepthCategory.Flag,
TADA.DepthProfileAggregation.Flag, TADA.ConsolidatedDepth, TADA.ConsolidatedDepth.Bottom,
and TADA.ConsolidatedDepth.Unit. The consolidated depth fields are created by reviewing
multiple WQC columns where users may input depth information. If a daily_agg = "avg",
"min", or "max", aggregated values will be identified in the TADA.ResultAggregation.Flag
column. In the case of daily_agg = "avg", additional rows to display averages will be
added to the dataframe. They can be identified by the prefix ("TADA-") of
their result identifiers.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When more than one result is available for a MonitoringLocationIdentifier,
ActivityStartDate, OrganizationIdentifier, and TADA.CharacteristicName, the
user can choose a single result value (average, max, or min value) to use for that
day and location. If results vary with depth, the user may also define whether
the daily aggregation occurs over each depth category (surface, middle, or bottom)
or for the entire depth profile.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load dataframe</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Data_6Tribes_5y</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># assign TADA.DepthCategory.Flag with no aggregation</span></span></span>
<span class="r-in"><span><span class="va">Data_6Tribs_5y_DepthCat</span> <span class="op">&lt;-</span> <span class="fu">TADA_FlagDepthCategory</span><span class="op">(</span><span class="va">Data_6Tribes_5y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_FlagDepthCategory: checking data set for depth values. 57765 results have depth values available."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_FlagDepthCategory: assigning depth categories."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_FlagDepthCategory: Grouping results by MonitoringLocationIdentifier, OrganizationIdentifier, CharacteristicName, and ActivityStartDate for aggregation for entire water column."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_FlagDepthCategory: No aggregation performed."</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># assign TADA.DepthCategory.Flag and determine average values by depth category and returning only aggregate values</span></span></span>
<span class="r-in"><span><span class="va">Data_6Tribs_5y_Mean</span> <span class="op">&lt;-</span> <span class="fu">TADA_FlagDepthCategory</span><span class="op">(</span><span class="va">Data_6Tribes_5y</span>, bycategory <span class="op">=</span> <span class="st">"all"</span>, dailyagg <span class="op">=</span> <span class="st">"avg"</span>, aggregatedonly <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_FlagDepthCategory: checking data set for depth values. 57765 results have depth values available."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_FlagDepthCategory: assigning depth categories."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_FlagDepthCategory: Grouping results by MonitoringLocationIdentifier, OrganizationIdentifier, CharacteristicName, ActivityStartDate, and TADA.DepthCategory.Flag for aggregation by TADA.DepthCategory.Flag."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TADA_FlagDepthCategory: Calculating mean aggregate value with randomly selected metadata."</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by U.S. Environmental Protection Agency, Cristina Mullin, Hillary Marler, Jacob Greif, Elise Hinman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

