% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/CriteriaInputs.R
\name{TADA_CreateParamRef}
\alias{TADA_CreateParamRef}
\title{ATTAINS Parameter Name and TADA/WQP Parameter Name Crosswalk}
\usage{
TADA_CreateParamRef(
  .data,
  org_names = NULL,
  paramRef = NULL,
  excel = TRUE,
  overwrite = FALSE
)
}
\arguments{
\item{.data}{A TADA dataframe. Users are expected to have already run the appropriate data
cleaning, processing, harmonization and filtering functions prior to this step as well as
provide the geospatial components with Module 2 TADA_GetATTAINS() function.}

\item{paramRef}{A data frame which contains a completed crosswalk between TADA_ComparableDataIdentifier
and ATTAINS.ParameterName. Users will need to ensure this crosswalk contains the appropriate column
names in order to run the function. Users will have two options:
\enumerate{
\item Supply a paramRef data frame which contains at least these four column names:
TADA.CharacteristicName, TADA.MethodSpeciationName, TADA.ResultSampleFractionText, ATTAINS.ParameterName
\item Supply a paramRef data frame which contains at least these two column names:
TADA.ComparableDataIdentifier and ATTAINS.ParameterName
Users who are interested in doing an assessment for more than one org_names will need to also include in
the paramRef data frame which contains an additional column name: 'organization_name'
in order to determine the proper crosswalk between TADA.ComparableDataIdentifier and ATTAINS.ParameterName
by organization name.
}}

\item{excel}{A boolean value that returns an excel spreadsheet if excel = TRUE. This spreadsheet is
created in the user's downloads folder path.
In the R console please type in: file.path(Sys.getenv("USERPROFILE"), "Downloads") in File explorer
if there is trouble locating the file. The file will be named "myfileRef.xlsx".
The excel spreadsheet will highlight the cells in which users should input information. Users may need to
insert additional rows to capture certain ATTAINS.ParameterName that correspond with multiple TADA.CharacteristicName.
Example: If your organization defines pH as "pH, High" and "pH, Low" that correspond to the TADA.CharacteristicName 'PH'.}

\item{overwrite}{A Boolean value that allows users to not overwrite the excel file
that is created. This will help prevent a user from overwriting their progress when
completing the excel spreadsheet.}

\item{org_name}{The ATTAINS organization name must be supplied by the user. A list of
organization names can be found by downloading the ATTAINS Domains Excel file:
https://www.epa.gov/system/files/other-files/2023-09/DOMAINS.xlsx. Organization names
are listed in the "OrgName" tab. The "code" column contains the organization names that
should be used for this param. If a user does not provide an org_names argument, the function
attempts to identify which organization name(s) are found in the dataframe to use as a reference.}
}
\value{
A data frame which contains the columns: TADA.ComparableDataIdentifier, organization_name,
EPA304A.PollutantName, ATTAINS.ParameterName, and ATTAINS.FlagParameterName. Users will need to complete
the crosswalk between ATTAINS.ParameterName and TADA.ComparableDataIdentifier.
}
\description{
Users will be required to complete and provide a crosswalk of the appropriate mapping
between ATTAINS parameter names for their organization with each TADA/WQP characteristic names/
TADA.ComparableDataIdentifier, found in the user's TADA data frame. This crosswalk allows
users to select which 'ATTAINS.ParameterName' from the drop-down excel spreadsheet aligns
with the corresponding unique list of TADA/WQP Characteristic Names/TADA.ComparableDataIdentifier.
}
\details{
If an ATTAINS parameter name is not listed as a prior domain value for your org from prior
ATTAINS assessment cycles, users should consider contacting the ATTAINS team to add this to the domain list.
Otherwise, users can still proceed by overriding the data validation by value pasting.
Users will be warned in the ATTAINS.FlagParameterName column if they choose to include an
ATTAINS.ParameterName that was not named in prior ATTAINS assessment cycles as:
'Suspect: parameter name is not found as a prior parameter name for this organization'

Users who already have a completed dataframe of this parameter crosswalk, that contains the
required column names from this function, can provide this as a reference for an argument
input, which would allow users to join this data to the blank output table template
from this function. From there, users will need to determine if any new TADA parameters
need to be matched with any ATTAIN parameters based on any missing cell values.

Users will need to ensure that this crosswalk table they provide contains the appropriate column
names that are needed in order to run the function. Users will have two options:
\enumerate{
\item Supply a paramRef data frame which contains at least these four column names:
TADA.CharacteristicName, TADA.MethodSpeciationName, TADA.ResultSampleFractionText, ATTAINS.ParameterName
\item Supply a paramRef data frame which contains at least these two column names:
TADA.ComparableDataIdentifier and ATTAINS.ParameterName
}

Users who are interested in doing an assessment for more than one org_names will need to also include in
the paramRef data frame which contains an additional column name: 'organization_name'
in order to determine the proper crosswalk between TADA.ComparableDataIdentifier and ATTAINS.ParameterName
by organization name.

A crosswalk between TADA.CharacteristicName and EPA 304A pollutant names (sourced from the Criteria Search Tool)
has been done on the EPATADA internal team. This crosswalk is still in development and only focuses on the
priority TADA.CharacteristicName.
}
\examples{
# This creates a blank paramRef template of UT Nutrients data. Users will need to fill this template out.
paramRef_UT <- TADA_CreateParamRef(Data_Nutrients_UT, org_names = "Utah", excel = FALSE)

# User can choose to edit the paramRef_UT through the R environment or in the excel spreadsheet. User
# should be aware that any updates done only in the R environment will not reflect the 'ATTAINS.FlagParameterName 
# values correctly. They are recommended to rerun the function with this completed crosswalk to do so if it 
# is done in the R environment only and not in excel.
paramRef_UT2 <- dplyr::mutate(paramRef_UT, ATTAINS.ParameterName = case_when(
    TADA.CharacteristicName == "AMMONIA" ~ "AMMONIA, TOTAL", 
    TADA.CharacteristicName == "NITRATE" ~ "NITRATE", 
    TADA.CharacteristicName == "NITROGEN" ~ "NITRATE/NITRITE (NITRITE + NITRATE AS N)" )
    )
paramRef_UT3 <- TADA_CreateParamRef(Data_Nutrients_UT, paramRef = paramRef_UT2, org_names = "Utah", excel = FALSE)

# Multiple org_names selection is allowed. Users should only provide org_names that pertains to their 
# assessments for cross walking ATTAINS.ParameterNames to WQP/TADA CharacteristicName.
Data_NCTCShepherdstown <- TADA_RunKeyFlagFunctions(Data_NCTCShepherdstown_HUC12)
Data_NCTCShepherdstown2 <- TADA_HarmonizeSynonyms(Data_NCTCShepherdstown)
paramRef_NCTC <- TADA_CreateParamRef(Data_NCTCShepherdstown2, org_names = c("Maryland", "Virginia", "Pennsylvania"), excel = FALSE)

}
