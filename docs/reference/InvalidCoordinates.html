<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='This function identifies and flags invalid coordinate data. When
clean_outsideUSA = "no" and clean_imprecise = FALSE,
a column will be appended titled "TADA.InvalidCoordinates.Flag" with the following
flags: 1) If the latitude is less than zero, the row will be
flagged with "LAT_OutsideUSA" (with the exception of American Samoa,
Northern Mariana Islands, and Guam), 2) If the longitude is greater than zero AND less than 145,
the row will be flagged as "LONG_OutsideUSA" (with the exception of
American Samoa, Northern Mariana Islands, and Guam), 3) If the latitude or longitude
contains the string, "999", the row will be flagged as invalid, and 4) Finally,
precision can be measured by the number of decimal places in the latitude and longitude
provided. If either the latitude or longitude does not have at least three numbers to the
right of the decimal point, the row will be flagged as "Imprecise". Occasionally
latitude and longitude measurements are flagged as outside of the United States
because the data was entered as negative when it should be positive or vice versa.
This function offers the option of clean_outsideUSA = "change sign" to fix this
issue. However, data owners should fix the raw data through WQX. For assistance
with changing raw data, email the WQX help desk: WQX@epa.gov'><title>Invalid coordinates — InvalidCoordinates • TADA</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Invalid coordinates — InvalidCoordinates"><meta property="og:description" content='This function identifies and flags invalid coordinate data. When
clean_outsideUSA = "no" and clean_imprecise = FALSE,
a column will be appended titled "TADA.InvalidCoordinates.Flag" with the following
flags: 1) If the latitude is less than zero, the row will be
flagged with "LAT_OutsideUSA" (with the exception of American Samoa,
Northern Mariana Islands, and Guam), 2) If the longitude is greater than zero AND less than 145,
the row will be flagged as "LONG_OutsideUSA" (with the exception of
American Samoa, Northern Mariana Islands, and Guam), 3) If the latitude or longitude
contains the string, "999", the row will be flagged as invalid, and 4) Finally,
precision can be measured by the number of decimal places in the latitude and longitude
provided. If either the latitude or longitude does not have at least three numbers to the
right of the decimal point, the row will be flagged as "Imprecise". Occasionally
latitude and longitude measurements are flagged as outside of the United States
because the data was entered as negative when it should be positive or vice versa.
This function offers the option of clean_outsideUSA = "change sign" to fix this
issue. However, data owners should fix the raw data through WQX. For assistance
with changing raw data, email the WQX help desk: WQX@epa.gov'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">TADA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/CONTRIBUTING.html">Contributing</a>
    <a class="dropdown-item" href="../articles/TADAModule1.html">Tools for Automated Data Analysis (TADA) Module 1: Water Quality Portal Data Discovery and Cleaning</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USEPA/TADA/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Invalid coordinates</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/TADA/blob/HEAD/R/ResultFlagsIndependent.R" class="external-link"><code>R/ResultFlagsIndependent.R</code></a></small>
      <div class="d-none name"><code>InvalidCoordinates.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function identifies and flags invalid coordinate data. When
clean_outsideUSA = "no" and clean_imprecise = FALSE,
a column will be appended titled "TADA.InvalidCoordinates.Flag" with the following
flags: 1) If the latitude is less than zero, the row will be
flagged with "LAT_OutsideUSA" (with the exception of American Samoa,
Northern Mariana Islands, and Guam), 2) If the longitude is greater than zero AND less than 145,
the row will be flagged as "LONG_OutsideUSA" (with the exception of
American Samoa, Northern Mariana Islands, and Guam), 3) If the latitude or longitude
contains the string, "999", the row will be flagged as invalid, and 4) Finally,
precision can be measured by the number of decimal places in the latitude and longitude
provided. If either the latitude or longitude does not have at least three numbers to the
right of the decimal point, the row will be flagged as "Imprecise". Occasionally
latitude and longitude measurements are flagged as outside of the United States
because the data was entered as negative when it should be positive or vice versa.
This function offers the option of clean_outsideUSA = "change sign" to fix this
issue. However, data owners should fix the raw data through WQX. For assistance
with changing raw data, email the WQX help desk: <a href="mailto:WQX@epa.gov">WQX@epa.gov</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">InvalidCoordinates</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  clean_outsideUSA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"no"</span>, <span class="st">"remove"</span>, <span class="st">"change sign"</span><span class="op">)</span>,</span>
<span>  clean_imprecise <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  errorsonly <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>.data</dt>
<dd><p>TADA dataframe</p></dd>


<dt>clean_outsideUSA</dt>
<dd><p>Character argument with options "no", "remove", and "change sign";
flags coordinates as outside the USA when clean_outsideUSA = "no";
removes data with coordinates outside of the United States when clean_outsideUSA = "remove";
changes sign of lat/long coordinates flagged as outside the USA when
clean_outside = "change sign"; Default is clean_outsideUSA = "no".</p></dd>


<dt>clean_imprecise</dt>
<dd><p>Boolean argument; removes imprecise data when
clean_imprecise = TRUE. Default is clean_imprecise = FALSE.</p></dd>


<dt>errorsonly</dt>
<dd><p>Boolean argument; Return only flagged data when errorsonly = TRUE;
default is errorsonly = FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>When clean_outsideUSA is "no", "change sign", or clean_imprecise argument is FALSE,
a column flagging rows with the respective QA check is appended to the input
dataframe. When clean_outsideUSA is "remove" or clean_imprecise is TRUE,
"invalid" or "imprecise" data is removed, respectively. When errorsonly is TRUE,
the dataframe will be filtered to show only the data flagged as invalid, imprecise,
or out of the United States. Defaults are clean_outsideUSA = "no",
clean_imprecise = FALSE, and errorsonly = FALSE.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load example dataset:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Nutrients_Utah</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Flag, but do not remove, data with invalid coordinates in new column </span></span></span>
<span class="r-in"><span><span class="co"># titled "TADA.InvalidCoordinates.Flag":</span></span></span>
<span class="r-in"><span><span class="co"># Return ALL data:</span></span></span>
<span class="r-in"><span><span class="va">InvalidCoord_flags</span> <span class="op">&lt;-</span> <span class="fu">InvalidCoordinates</span><span class="op">(</span><span class="va">Nutrients_Utah</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Flag, but do not remove, data with invalid coordinates in new column </span></span></span>
<span class="r-in"><span><span class="co"># titled "TADA.InvalidCoordinates.Flag"</span></span></span>
<span class="r-in"><span><span class="co"># Return ONLY the flagged data:</span></span></span>
<span class="r-in"><span><span class="va">InvalidCoord_flags_errorsonly</span> <span class="op">&lt;-</span> <span class="fu">InvalidCoordinates</span><span class="op">(</span><span class="va">Nutrients_Utah</span>, errorsonly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove data with coordinates outside the USA, but keep flagged data with </span></span></span>
<span class="r-in"><span><span class="co"># imprecise coordinates:</span></span></span>
<span class="r-in"><span><span class="va">OutsideUSACoord_removed</span> <span class="op">&lt;-</span> <span class="fu">InvalidCoordinates</span><span class="op">(</span><span class="va">Nutrients_Utah</span>, clean_outsideUSA <span class="op">=</span> <span class="st">"remove"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Change the sign of coordinates flagged as outside the USA and keep all</span></span></span>
<span class="r-in"><span><span class="co"># flagged data:</span></span></span>
<span class="r-in"><span><span class="va">OutsideUSACoord_changed</span> <span class="op">&lt;-</span> <span class="fu">InvalidCoordinates</span><span class="op">(</span><span class="va">Nutrients_Utah</span>, clean_outsideUSA <span class="op">=</span> <span class="st">"change sign"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "When clean_outsideUSA == change sign, the sign for any lat/long coordinates flagged as outside of USA are switched. This is a temporary solution. Data owners should fix the raw data to address invalid coordinates through WQX. For assistance fixing data errors you see in the WQP, email the WQX helpdesk (WQX@epa.gov)."</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove data with imprecise coordinates, but keep flagged data with coordinates outside the USA;</span></span></span>
<span class="r-in"><span><span class="co"># imprecise data may include a series of 999's to the right of the decimal points;</span></span></span>
<span class="r-in"><span><span class="co"># alternatively, imprecise data may have less than 3 significant figures to the right</span></span></span>
<span class="r-in"><span><span class="co"># of the decimal point:</span></span></span>
<span class="r-in"><span><span class="va">ImpreciseCoord_removed</span> <span class="op">&lt;-</span> <span class="fu">InvalidCoordinates</span><span class="op">(</span><span class="va">Nutrients_Utah</span>, clean_imprecise <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove data with imprecise coordinates or coordinates outside the USA from the dataframe:</span></span></span>
<span class="r-in"><span><span class="va">InvalidCoord_removed</span> <span class="op">&lt;-</span> <span class="fu">InvalidCoordinates</span><span class="op">(</span><span class="va">Nutrients_Utah</span>, clean_outsideUSA <span class="op">=</span> <span class="st">"remove"</span>, clean_imprecise <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "All invalid coordinates were removed. Returning input dataframe with TADA.InvalidCoordinates.Flag column for tracking."</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Cristina Mullin, Michelle Thawley, Jacob Greif, Laura Shumway, Elise Hinman, Kathleen Healy.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

